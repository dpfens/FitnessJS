if(!self.window){window=self;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,da=this;function n(a){return void 0!==a}function ea(){}function fa(){throw Error("unimplemented abstract method");}
function ga(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ha(a){return null!=a}function ia(a){var b=ga(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ja(a){return"string"==typeof a}function ka(a){return"function"==ga(a)}function la(a){return a[ma]||(a[ma]=++na)}var ma="closure_uid_"+(1E9*Math.random()>>>0),na=0;function oa(a,b,c){return a.call.apply(a.bind,arguments)}
function pa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function qa(a,b,c){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oa:pa;return qa.apply(null,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function q(a,b){a=a.split(".");var c=da;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&n(b)?c[d]=b:c=c[d]?c[d]:c[d]={}}
function r(a,b){function c(){}c.prototype=b.prototype;a.jb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Vg=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};function sa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,sa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}r(sa,Error);sa.prototype.name="CustomError";var ua=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.pg=c;this.Of=a;this.Kg=b;this.rd=0;this.gd=null}wa.prototype.get=function(){var a;0<this.rd?(this.rd--,a=this.gd,this.gd=a.next,a.next=null):a=this.Of();return a};wa.prototype.put=function(a){this.Kg(a);this.rd<this.pg&&(this.rd++,a.next=this.gd,this.gd=a)};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ja(a))return ja(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ja(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ja(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c,d){d&&(b=qa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ba=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ja(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ca(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Da(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ea(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ga(d))for(var e=0;e<d.length;e+=8192)for(var f=Ea.apply(null,Ca(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Fa(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Ga;a:{var Ha=da.navigator;if(Ha){var Ia=Ha.userAgent;if(Ia){Ga=Ia;break a}}Ga=""}function t(a){return-1!=Ga.indexOf(a)};function Ja(){return t("Safari")&&!(Ka()||t("Coast")||t("Opera")||t("Edge")||t("Silk")||t("Android"))}function Ka(){return(t("Chrome")||t("CriOS"))&&!t("Edge")};function La(a){da.setTimeout(function(){throw a;},0)}var Ma;
function Na(){var a=da.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!t("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=qa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!t("Trident")&&!t("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(n(c.next)){c=c.next;var a=c.Fe;c.Fe=null;a()}};return function(a){d.next={Fe:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){da.setTimeout(a,0)}};function Pa(){this.Bd=this.pc=null}var Ra=new wa(function(){return new Qa},function(a){a.reset()},100);Pa.prototype.add=function(a,b){var c=Ra.get();c.set(a,b);this.Bd?this.Bd.next=c:this.pc=c;this.Bd=c};Pa.prototype.remove=function(){var a=null;this.pc&&(a=this.pc,this.pc=this.pc.next,this.pc||(this.Bd=null),a.next=null);return a};function Qa(){this.next=this.scope=this.Td=null}Qa.prototype.set=function(a,b){this.Td=a;this.scope=b;this.next=null};
Qa.prototype.reset=function(){this.next=this.scope=this.Td=null};function Sa(a,b){Ta||Ua();Va||(Ta(),Va=!0);Wa.add(a,b)}var Ta;function Ua(){var a=da.Promise;if(-1!=String(a).indexOf("[native code]")){var b=a.resolve(void 0);Ta=function(){b.then(Xa)}}else Ta=function(){var a=Xa;!ka(da.setImmediate)||da.Window&&da.Window.prototype&&!t("Edge")&&da.Window.prototype.setImmediate==da.setImmediate?(Ma||(Ma=Na()),Ma(a)):da.setImmediate(a)}}var Va=!1,Wa=new Pa;function Xa(){for(var a;a=Wa.remove();){try{a.Td.call(a.scope)}catch(b){La(b)}Ra.put(a)}Va=!1};function u(a,b){this.Ta=0;this.mf=void 0;this.Xc=this.dc=this.D=null;this.fd=this.Rd=!1;if(a!=ea)try{var c=this;a.call(b,function(a){Ya(c,2,a)},function(a){Ya(c,3,a)})}catch(d){Ya(this,3,d)}}function Za(){this.next=this.context=this.jc=this.Jc=this.child=null;this.Ed=!1}Za.prototype.reset=function(){this.context=this.jc=this.Jc=this.child=null;this.Ed=!1};var $a=new wa(function(){return new Za},function(a){a.reset()},100);function ab(a,b,c){var d=$a.get();d.Jc=a;d.jc=b;d.context=c;return d}
function v(a){if(a instanceof u)return a;var b=new u(ea);Ya(b,2,a);return b}function bb(a){return new u(function(b,c){c(a)})}function cb(a,b,c){db(a,b,c,null)||Sa(ra(b,a))}function eb(a){return new u(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,p;k<a.length;k++)p=a[k],cb(p,ra(f,k),h);else b(e)})}function w(){var a,b,c=new u(function(c,e){a=c;b=e});return new fb(c,a,b)}
u.prototype.then=function(a,b,c){return gb(this,ka(a)?a:null,ka(b)?b:null,c)};u.prototype.then=u.prototype.then;u.prototype.$goog_Thenable=!0;u.prototype.ve=function(a,b){return gb(this,null,a,b)};function hb(a,b){a.dc||2!=a.Ta&&3!=a.Ta||ib(a);a.Xc?a.Xc.next=b:a.dc=b;a.Xc=b}
function gb(a,b,c,d){var e=ab(null,null,null);e.child=new u(function(a,h){e.Jc=b?function(c){try{var e=b.call(d,c);a(e)}catch(K){h(K)}}:a;e.jc=c?function(b){try{var e=c.call(d,b);!n(e)&&b instanceof jb?h(b):a(e)}catch(K){h(K)}}:h});e.child.D=a;hb(a,e);return e.child}u.prototype.Qg=function(a){this.Ta=0;Ya(this,2,a)};u.prototype.Rg=function(a){this.Ta=0;Ya(this,3,a)};
function Ya(a,b,c){0==a.Ta&&(a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ta=1,db(c,a.Qg,a.Rg,a)||(a.mf=c,a.Ta=b,a.D=null,ib(a),3!=b||c instanceof jb||kb(a,c)))}function db(a,b,c,d){if(a instanceof u)return hb(a,ab(b||ea,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ka(f))return lb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function lb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(p){f(p)}}function ib(a){a.Rd||(a.Rd=!0,Sa(a.Vf,a))}function mb(a){var b=null;a.dc&&(b=a.dc,a.dc=b.next,b.next=null);a.dc||(a.Xc=null);return b}
u.prototype.Vf=function(){for(var a;a=mb(this);){var b=this.Ta,c=this.mf;if(3==b&&a.jc&&!a.Ed){var d;for(d=this;d&&d.fd;d=d.D)d.fd=!1}if(a.child)a.child.D=null,nb(a,b,c);else try{a.Ed?a.Jc.call(a.context):nb(a,b,c)}catch(e){ob.call(null,e)}$a.put(a)}this.Rd=!1};function nb(a,b,c){2==b?a.Jc.call(a.context,c):a.jc&&a.jc.call(a.context,c)}function kb(a,b){a.fd=!0;Sa(function(){a.fd&&ob.call(null,b)})}var ob=La;function jb(a){sa.call(this,a)}r(jb,sa);jb.prototype.name="cancel";
function fb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};function pb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var p=0;p<f+1;p++)h[0][p]=0;for(k=1;k<=e;k++)for(p=1;p<=f;p++)c(a[k-1],b[p-1])?h[k][p]=h[k-1][p-1]+1:h[k][p]=Math.max(h[k-1][p],h[k][p-1]);for(var K=[],k=e,p=f;0<k&&0<p;)c(a[k-1],b[p-1])?(K.unshift(d(k-1,p-1)),k--,p--):h[k-1][p]>h[k][p-1]?k--:p--;return K}function qb(a){return Aa(arguments,function(a,c){return a+c},0)}
function rb(a){return qb.apply(null,arguments)/arguments.length}function sb(a){var b=arguments.length;if(2>b)return 0;var c=rb.apply(null,arguments);return qb.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function tb(a){return Math.sqrt(sb.apply(null,arguments))};var ub="StopIteration"in da?da.StopIteration:{message:"StopIteration",stack:""};function vb(){}vb.prototype.next=function(){throw ub;};vb.prototype.qc=function(){return this};function wb(a){if(a instanceof vb)return a;if("function"==typeof a.qc)return a.qc(!1);if(ia(a)){var b=0,c=new vb;c.next=function(){for(;;){if(b>=a.length)throw ub;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function xb(a,b){if(ia(a))try{ya(a,b,void 0)}catch(c){if(c!==ub)throw c;}else{a=wb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==ub)throw c;}}}function yb(a){if(Ba(arguments,function(a){return!a.length})||!arguments.length)return new vb;var b=new vb,c=arguments,d=Da(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw ub;};return b};function zb(a,b){this.l={};this.a=[];this.Ua=this.Gb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=zb.prototype;m.Ac=g("Gb");m.qa=function(){Ab(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.l[this.a[b]]);return a};function Bb(a){Ab(a);return a.a.concat()}m.Pa=function(a){return Cb(this.l,a)};m.kd=function(){return 0==this.Gb};
m.clear=function(){this.l={};this.Ua=this.Gb=this.a.length=0};m.remove=function(a){return Cb(this.l,a)?(delete this.l[a],this.Gb--,this.Ua++,this.a.length>2*this.Gb&&Ab(this),!0):!1};function Ab(a){if(a.Gb!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Cb(a.l,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.Gb!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Cb(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}m.get=function(a,b){return Cb(this.l,a)?this.l[a]:b};
m.set=function(a,b){Cb(this.l,a)||(this.Gb++,this.a.push(a),this.Ua++);this.l[a]=b};m.addAll=function(a){var b;if(a instanceof zb)b=Bb(a),a=a.qa();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Fa(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Bb(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};m.clone=function(){return new zb(this)};
m.qc=function(a){Ab(this);var b=0,c=this.Ua,d=this,e=new vb;e.next=function(){if(c!=d.Ua)throw Error("The map has changed since the iterator was created");if(b>=d.a.length)throw ub;var e=d.a[b++];return a?e:d.l[e]};return e};function Cb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Fb(a,b){var c=Gb;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)};var Hb=t("Opera"),Ib=t("Trident")||t("MSIE"),Jb=t("Edge"),Kb=t("Gecko")&&!(-1!=Ga.toLowerCase().indexOf("webkit")&&!t("Edge"))&&!(t("Trident")||t("MSIE"))&&!t("Edge"),Lb=-1!=Ga.toLowerCase().indexOf("webkit")&&!t("Edge"),Mb;
a:{var Nb="",Ob=function(){var a=Ga;if(Kb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Jb)return/Edge\/([\d\.]+)/.exec(a);if(Ib)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Lb)return/WebKit\/(\S+)/.exec(a);if(Hb)return/(?:Version)[ \/]?(\S+)/.exec(a)}();Ob&&(Nb=Ob?Ob[1]:"");if(Ib){var Pb,Qb=da.document;Pb=Qb?Qb.documentMode:void 0;if(null!=Pb&&Pb>parseFloat(Nb)){Mb=String(Pb);break a}}Mb=Nb}var Rb=Mb,Gb={};
function Sb(a){return Fb(a,function(){for(var b=0,c=ua(String(Rb)).split("."),d=ua(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",k=d[f]||"";do{h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];k=/(\d*)(\D*)(.*)/.exec(k)||["","","",""];if(0==h[0].length&&0==k[0].length)break;b=va(0==h[1].length?0:parseInt(h[1],10),0==k[1].length?0:parseInt(k[1],10))||va(0==h[2].length,0==k[2].length)||va(h[2],k[2]);h=h[3];k=k[3]}while(0==b)}return 0<=b})};var Tb=t("iPhone")&&!t("iPod")&&!t("iPad")||t("iPod"),Ub=t("iPad");/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Vb(){this.pe=Ja()||Ub||Tb;this.fg=!(this.pe||Ib&&!Sb(10));!Ib||Sb(11);this.Ug=Ka()||Ja();this.ug=n(window.Map)&&n(window.Map.prototype.values)&&n(window.Map.prototype.forEach)&&!this.pe;this.vg=n(window.Set)&&n(window.Set.prototype.values)&&n(window.Set.prototype.forEach)&&!this.pe}var Wb;function Xb(){n(Wb)||(Wb=new Vb);return Wb};function x(){this.l=new zb;Object.defineProperty(this,"size",{get:function(){return this.l.Ac()}})}x.prototype.clear=function(){this.l.clear()};x.prototype.clear=x.prototype.clear;x.prototype.delete=function(a){return this.l.remove(a)};x.prototype["delete"]=x.prototype.delete;x.prototype.forEach=function(a,b){return this.l.forEach(a,b)};x.prototype.forEach=x.prototype.forEach;x.prototype.get=function(a){return this.l.get(a)};x.prototype.get=x.prototype.get;x.prototype.has=function(a){return this.l.Pa(a)};
x.prototype.has=x.prototype.has;x.prototype.set=function(a,b){return this.l.set(a,b)};x.prototype.set=x.prototype.set;var Yb=Xb().ug;function y(){return Yb?new window.Map:new x}function Zb(a){if(a instanceof x)return Bb(a.l);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function z(a){if(a instanceof x)return a.l.qa();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function $b(a,b){this.sa=a;this.m=b||this.Ke()}var ac=0;m=$b.prototype;m.id=g("sa");m.Ke=function(){return{}};m.vf=g("m");m.Ja=function(){return{id:this.sa,value:this.vf()}};m.ob=function(a){return"#"==a.substr(-1)?this.sa:null};function bc(a){return new $b(a.id,a.value)}function cc(a){return new $b(ac++,a||{})}function dc(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var ec={};q("lf.TransactionType",ec);ec.READ_ONLY=0;ec.READ_WRITE=1;function A(a,b,c,d,e){this.wd=a;this.jg=b;this.Tg=c;this.Qf=d;this.If=e}q("lf.TransactionStats",A);A.prototype.Og=g("wd");A.prototype.success=A.prototype.Og;A.prototype.ig=g("jg");A.prototype.insertedRowCount=A.prototype.ig;A.prototype.Sg=g("Tg");A.prototype.updatedRowCount=A.prototype.Sg;A.prototype.Pf=g("Qf");A.prototype.deletedRowCount=A.prototype.Pf;A.prototype.Hf=g("If");A.prototype.changedTableCount=A.prototype.Hf;function fc(a,b){this.yd=a;this.Ra=b||null;this.S=w();this.wd=!1;this.za=null}m=fc.prototype;m.H=fa;m.ec=fa;m.ka=function(){return(0==this.yd?this.ec():gc(this)).then(function(a){this.wd=!0;return a}.bind(this))};function gc(a){try{hc(a.Ra)}catch(b){return bb(b)}return ic(a).then(function(a){this.Ra.ka();return a}.bind(a))}function ic(a){jc(a);kc(a);return a.ec()}
function jc(a){a.Ra.kb.forEach(function(a,c){c=this.Ra.ca().get(c);c=this.H(c.getName(),c.cb.bind(c),0);var b=z(a.xa).map(function(a){return a.id()});0<b.length&&c.remove(b).ve(this.Se,this);a=z(a.la).map(function(a){return a[1]}).concat(z(a.wa));c.put(a).ve(this.Se,this)},a)}function kc(a){lc(a.Ra).forEach(function(a){var b=this.H(a.getName(),bc,1);b.remove([]);b.put(a.Ja())},a)}m.Se=function(a){this.S.reject(a)};
m.Y=function(){if(null===this.za)if(this.wd)if(0==this.yd)this.za=new A(!0,0,0,0,0);else{var a=0,b=0,c=0,d=0;this.Ra.kb.forEach(function(e){d++;a+=e.wa.size;c+=e.la.size;b+=e.xa.size});this.za=new A(!0,a,c,b,d)}else this.za=new A(!1,0,0,0,0);return this.za};function mc(a){this.Lg=a}mc.prototype.toString=g("Lg");var nc=new mc("backstore"),oc=new mc("cache"),pc=new mc("indexstore"),qc=new mc("engine"),rc=new mc("runner"),sc=new mc("observerregistry"),tc=new mc("schema");function uc(a){if(a.qa&&"function"==typeof a.qa)return a.qa();if(ja(a))return a.split("");if(ia(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Fa(a)};function vc(a){this.l=new zb;a&&this.addAll(a)}function wc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+la(a):b.substr(0,1)+a}m=vc.prototype;m.Ac=function(){return this.l.Ac()};m.add=function(a){this.l.set(wc(a),a)};m.addAll=function(a){a=uc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.l.remove(wc(a))};m.clear=function(){this.l.clear()};m.kd=function(){return this.l.kd()};m.contains=function(a){return this.l.Pa(wc(a))};m.qa=function(){return this.l.qa()};
m.clone=function(){return new vc(this)};m.qc=function(){return this.l.qc(!1)};function xc(a){this.Xb=new vc(a);Object.defineProperty(this,"size",{get:function(){return this.Xb.Ac()}})}xc.prototype.add=function(a){this.Xb.add(a)};xc.prototype.add=xc.prototype.add;xc.prototype.clear=function(){this.Xb.clear()};xc.prototype.clear=xc.prototype.clear;xc.prototype.delete=function(a){return this.Xb.remove(a)};xc.prototype["delete"]=xc.prototype.delete;xc.prototype.forEach=function(a,b){this.Xb.qa().forEach(a,b)};xc.prototype.has=function(a){return this.Xb.contains(a)};
xc.prototype.has=xc.prototype.has;var yc=Xb().vg;function B(a){return yc?n(a)?new window.Set(a):new window.Set:new xc(a)}function C(a){if(a instanceof xc)return a.Xb.qa();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function zc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function Ac(a,b){this.sa=a;this.m=b||{}}function Bc(a){var b=B();a.forEach(function(a){b.add(a>>9)});return C(b)}Ac.prototype.W=g("sa");function Cc(a,b){b.forEach(function(a){this.m[a.id()]=a.Ja()},a)}function Dc(a,b){b.forEach(function(a){delete this.m[a]},a)}Ac.prototype.Ja=function(){return{id:this.sa,value:JSON.stringify(this.m)}};function Ec(a){return new Ac(a.id,JSON.parse(a.value))};function Fc(a,b,c){this.Z=a;this.Ib=b;this.nf=c}m=Fc.prototype;m.get=function(a){if(0==a.length)return this.Vd();var b=this.Ib;return Gc(this,a).then(function(c){return a.map(function(a){var d=c.get(a>>9);return b(d.m[a])})})};function Gc(a,b){var c=y(),d=w();a=Bc(b).map(function(a){return new u(function(b,d){var e;try{e=this.Z.get(a)}catch(p){d(p);return}e.onerror=d;e.onsuccess=function(a){a=Ec(a.target.result);c.set(a.W(),a);b()}},this)},a);eb(a).then(function(){d.resolve(c)});return d.ha}
m.Vd=function(){return new u(function(a,b){var c=[],d;try{d=this.Z.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f=Ec(b.value).m,h;for(h in f)c.push(this.Ib(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Tb=function(a){return new u(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return v();var b=y();a.forEach(function(a){var c=a.id()>>9,e=b.get(c)||null;null===e&&(e=this.nf(this.Z.name,c));Cc(e,[a]);b.set(c,e)},this);a=z(b).map(function(a){return this.Tb(function(){return this.Z.put(a.Ja())}.bind(this))},this);return eb(a)};
m.remove=function(a){if(0==a.length)return this.Tb(function(){return this.Z.clear()}.bind(this));var b=y();a.forEach(function(a){var c=a>>9,e=b.get(c)||null;null===e&&(e=this.nf(this.Z.name,c));Dc(e,[a]);b.set(c,e)},this);a=z(b).map(function(a){return this.Tb(function(){return 0==Object.keys(a.m).length?this.Z.delete(a.W()):this.Z.put(a.Ja())}.bind(this))},this);return eb(a)};function Hc(a,b,c){a=a.b(oc);var d=[c<<9,(c+1<<9)-1];b=a.Va(b,d[0],d[1]);c=new Ac(c);Cc(c,b);return c}
function Ic(a,b){return new Ac(b)};function Jc(a){this.V=a.b(oc);this.C=a.b(pc);this.g=a.b(tc)}Jc.prototype.update=function(a){a.forEach(function(a){Kc(this,a);Lc(this,a)},this)};function Lc(a,b){var c=b.getName();b.xa.forEach(function(a,b){this.V.remove(c,b)},a);b.wa.forEach(function(a){this.V.set(c,a)},a);b.la.forEach(function(a){this.V.set(c,a[1])},a)}function Kc(a,b){var c=a.g.table(b.getName());Mc(b).forEach(function(a){Nc(this,c,a)},a)}
function Nc(a,b,c){var d=a.C.mc.get(b.getName())||[],e=0;d.forEach(function(a){try{Oc(a,c),e++}catch(h){throw d.slice(0,e).forEach(function(a){Oc(a,[c[1],c[0]])},this),h;}},a)}function Oc(a,b){var c=null===b[1]?void 0:b[1].ob(a.getName()),d=null===b[0]?void 0:b[0].ob(a.getName());if(!n(d)&&n(c))a.add(c,b[1].id());else if(n(d)&&n(c)){if(null===c||null===d){if(c==d)return}else if(0==a.lb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else n(d)&&!n(c)&&a.remove(d,b[0].id())};var Pc={};q("lf.ConstraintAction",Pc);Pc.RESTRICT=0;Pc.CASCADE=1;var Qc={};q("lf.ConstraintTiming",Qc);Qc.IMMEDIATE=0;Qc.DEFERRABLE=1;var Rc={};q("lf.Order",Rc);Rc.DESC=0;Rc.ASC=1;var Sc={};q("lf.Type",Sc);Sc.ARRAY_BUFFER=0;Sc.BOOLEAN=1;Sc.DATE_TIME=2;Sc.INTEGER=3;Sc.NUMBER=4;Sc.STRING=5;Sc.OBJECT=6;var Tc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};q("lf.type.DEFAULT_VALUES",Tc);function D(a,b){this.code=a;this.message="http://google.github.io/lovefield/error_lookup/src/error_lookup.html?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(String(arguments[c]).slice(0,64))}r(D,Error);function Vc(){this.l=y();this.size=0}m=Vc.prototype;m.has=function(a){return this.l.has(a)};m.set=function(a,b){var c=this.l.get(a)||null;null===c&&(c=B(),this.l.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Wb=function(a,b){var c=this.l.get(a)||null;null===c&&(c=B(),this.l.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.ae=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Wb(b,c)},this);return this};
m.delete=function(a,b){var c=this.l.get(a)||null;if(null===c)return!1;if(b=c.delete(b))--this.size,0==c.size&&this.l.delete(a);return b};m.get=function(a){a=this.l.get(a)||null;return null===a?null:C(a)};m.clear=function(){this.l.clear();this.size=0};m.keys=function(){return Zb(this.l)};m.values=function(){var a=[];this.l.forEach(function(b){a.push.apply(a,C(b))});return a};function Wc(a){this.C=a.b(pc);this.g=a.b(tc);this.V=a.b(oc);this.bd=null}function Xc(a,b,c){var d=b.zb().xg;c.forEach(function(a){d.forEach(function(b){if(null==a.m[b.getName()])throw new D(202,b.j());},this)},a)}function Yc(a,b,c,d){b.zb().Ud.forEach(function(a){a.timing==d&&Zc(this,a,c)},a)}function Zc(a,b,c){var d=$c(a,b);c.forEach(function(a){if(ad(a[0],a[1],b.name)&&(a=a[1].ob(b.name),null!==a&&!d.Pa(a)))throw new D(203,b.name);},a)}
function $c(a,b){null===a.bd&&(a.bd=y());var c=a.bd.get(b.name)||null;null===c&&(c=a.g.table(b.Xa)[b.Kc].Ca(),c=a.C.get(c.j()),a.bd.set(b.name,c));return c}function ad(a,b,c){return(null===a?null!==b:null===b)||a.ob(c)!=b.ob(c)}function bd(a,b,c,d){b=cd(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&dd(a,b,c,function(a,b,c){if(b.Pa(c))throw new D(203,a.name);}))}
function ed(a,b,c){b=cd(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Vc;dd(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Wb(a.Ge,b)});return d}function fd(a,b,c){var d=new Vc;dd(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Sd:a,Cg:k[1]})})});return d}function dd(a,b,c,d){b.forEach(function(a){var b=this.C.get(a.name),e=$c(this,a);c.forEach(function(c){if(ad(c[0],c[1],e.getName())){var f=c[0].ob(e.getName());d(a,b,f,c)}},this)},a)}
function gd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Yc(a,b,c,d))}function hd(a,b,c,d){0!=c.length&&(Yc(a,b,c,d),bd(a,b,c,d))}function id(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),bd(a,b,c,d))}
function jd(a,b,c){var d={ue:[],qf:new Vc},e=new Vc;e.Wb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Vc;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.V.get(a),null]},this);b=ed(this,b,a);null!==b&&(d.ue.unshift.apply(d.ue,b.keys()),f.ae(b))},a);e=f;d.qf.ae(e)}while(0<e.size);return d};function kd(a){this.wa=y();this.la=y();this.xa=y();this.A=a}m=kd.prototype;m.getName=g("A");m.add=function(a){if(this.xa.has(a.id())){var b=[this.xa.get(a.id()),a];this.la.set(a.id(),b);this.xa.delete(a.id())}else this.wa.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.wa.has(c)?this.wa.set(c,b):(this.la.has(c)&&(a=[this.la.get(a[0].id())[0],b]),this.la.set(c,a))};
m.delete=function(a){if(this.wa.has(a.id()))this.wa.delete(a.id());else if(this.la.has(a.id())){var b=this.la.get(a.id())[0];this.la.delete(a.id());this.xa.set(a.id(),b)}else this.xa.set(a.id(),a)};m.ae=function(a){a.wa.forEach(function(a){this.add(a)},this);a.la.forEach(function(a){this.modify(a)},this);a.xa.forEach(function(a){this.delete(a)},this)};
function Mc(a){var b=[];a.wa.forEach(function(a){b.push([null,a])});a.la.forEach(function(a){b.push(a)});a.xa.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Zb(this.wa).toString()+"], ["+Zb(this.la).toString()+"], ["+Zb(this.xa).toString()+"]"};function ld(a){var b=new kd(a.A);a.wa.forEach(function(a){b.delete(a)});a.xa.forEach(function(a){b.add(a)});a.la.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.kd=function(){return 0==this.wa.size&&0==this.xa.size&&0==this.la.size};function md(a,b){this.aa=y();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.g=a.b(tc);this.V=a.b(oc);this.C=a.b(pc);this.Aa=new Wc(a);this.hd=new Jc(a);this.kb=y()}function lc(a){var b=[];Zb(a.kb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Db()&&(a.Da().forEach(function(a){b.push(this.C.get(a.j()))},this),b.push(this.C.get(a.getName()+".#")))},a);return b}m=md.prototype;m.ca=g("aa");
m.Bb=function(a,b){nd(this,a);Xc(this.Aa,a,b);gd(this.Aa,a,b,0);for(var c=0;c<b.length;c++)od(this,a,[null,b[c]])};function od(a,b,c){var d=b.getName(),e=a.kb.get(d)||new kd(d);a.kb.set(d,e);try{Nc(a.hd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.V.set(d,f),e.add(f)):null!==b&&null!==f?(a.V.set(d,f),e.modify(c)):null!==b&&null===f&&(a.V.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){nd(this,a);Xc(this.Aa,a,b);b=b.map(function(a){return[this.V.get(a.id()),a]},this);pd(this,a,b);hd(this.Aa,a,b,0);b.forEach(function(b){od(this,a,b)},this)};m.Wd=function(a,b){nd(this,a);Xc(this.Aa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=this.Aa;f=d;var k=a.zb().td;null===k?f=null:(k=k.j(),f=f.ob(k),f=h.C.get(k).get(f),f=0==f.length?null:f[0]);null!=f?(e=this.V.get(f),d.sa=f,hd(this.Aa,a,[[e,d]],0)):gd(this.Aa,a,[d],0);od(this,a,[e,d])}};
m.remove=function(a,b){nd(this,a);qd(this,a,b);id(this.Aa,a,b,0);for(var c=0;c<b.length;c++)od(this,a,[b[c],null])};function pd(a,b,c){b=cd(a.g.info(),b.getName(),1);if(null!==b){var d=fd(a.Aa,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Sd.Ge),d=this.V.get(a),e=c.cb(d.Ja());e.m[b.Sd.wb]=b.Cg.m[b.Sd.Kc];od(this,c,[d,e])},this)},a)}}
function qd(a,b,c){if(null!==cd(a.g.info(),b.getName(),1)){b=jd(a.Aa,b,c);var d=b.qf;b.ue.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.V.get(a)},this);id(this.Aa,b,a,0);a.forEach(function(a){od(this,b,[a,null])},this)},a)}}function hc(a){a.kb.forEach(function(a){var b=this.aa.get(a.getName());gd(this.Aa,b,z(a.wa),1);id(this.Aa,b,z(a.xa),1);hd(this.Aa,b,z(a.la),1)},a)}m.ka=aa();m.Lb=function(){var a=z(this.kb).map(function(a){return ld(a)});this.hd.update(a)};
function nd(a,b){if(!a.aa.has(b.getName()))throw new D(106,b.getName());};function E(a,b,c,d){this.from=a;this.s=b;this.ea=this.from==F?!1:c;this.na=this.s==F?!1:d}var F=new (aa());E.prototype.toString=function(){return(this.ea?"(":"[")+(this.from==F?"unbound":this.from)+", "+(this.s==F?"unbound":this.s)+(this.na?")":"]")};function rd(a){if(sd(a))return[];var b=null,c=null;a.from==F||(b=new E(F,a.from,!1,!a.ea));a.s==F||(c=new E(a.s,F,!a.na,!1));return[b,c].filter(function(a){return null!==a})}E.prototype.reverse=function(){return new E(this.s,this.from,this.na,this.ea)};
function td(a,b){var c=ud(a.from,b.from,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b;a=1==c?a:b;return d.s==F||d.s>a.from||d.s==a.from&&!d.na&&!a.ea}function vd(){return new E(F,F,!1,!1)}function sd(a){return a.from==F&&a.s==F}function wd(a){return a.from==a.s&&a.from!=F&&!a.ea&&!a.na}E.prototype.contains=function(a){var b=this.s==F||a<this.s||a==this.s&&!this.na;return(this.from==F||a>this.from||a==this.from&&!this.ea)&&b};
function ud(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function xd(a,b){var c=ud(a.from,b.from,!0,a.ea,b.ea);0==c&&(c=ud(a.s,b.s,!1,a.na,b.na));return c}function yd(a){if(0==a.length)return[];a.sort(xd);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new E(F,a[c].from,!1,!0):c==b.length-1?new E(a[c-1].s,F,!0,!1):new E(a[c-1].s,a[c].from,!0,!0);return b};function zd(a){this.lc=[];n(a)&&this.add(a)}zd.prototype.toString=function(){return this.lc.map(function(a){return a.toString()}).join(",")};zd.prototype.Pa=function(a){return this.lc.some(function(b){return b.contains(a)})};zd.prototype.qa=g("lc");
zd.prototype.add=function(a){if(0!=a.length)if(a=this.lc.concat(a),1==a.length)this.lc=a;else{a.sort(xd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(td(c,a[d])){var e=a[d],f=vd();if(c.from!=F&&e.from!=F){var h=ud(c.from,e.from,!0);1!=h?(f.from=c.from,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.from=e.from,f.ea=e.ea)}c.s!=F&&e.s!=F&&(h=ud(c.s,e.s,!1),-1!=h?(f.s=c.s,f.na=0!=h?c.na:c.na&&e.na):(f.s=e.s,f.na=e.na));c=f}else b.push(c),c=a[d];b.push(c);this.lc=b}};
function Ad(a,b){var c=[];a.qa().map(function(a){return b.qa().map(function(b){var c;if(td(a,b)){c=vd();var d=ud(a.from,b.from,!0),d=0==d?a.ea?a:b:-1!=d?a:b;c.from=d.from;c.ea=d.ea;a.s==F||b.s==F?b=a.s==F?b:a:(d=ud(a.s,b.s,!1),b=0==d?a.na?a:b:-1==d?a:b);c.s=b.s;c.na=b.na}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new zd(c.filter(function(a){return null!==a}))};function G(a,b){this.entries=a;this.M=B(b);this.ab=null}G.prototype.o=function(){return C(this.M)};function Bd(a){return a.entries.map(function(a){return a.va.m})}function Cd(a){return a.entries.map(function(a){return a.va.id()})}function Dd(a,b){return a.ab.get(b.j())}var Ed=null;function Fd(){null===Ed&&(Ed=new G([],[]));return Ed}
function Gd(a){if(0==a.length)return Fd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=y();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=y(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(z(e),C(a[0].M))}function Hd(a){if(0==a.length)return Fd();var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(z(b),C(a[0].M))}
function Id(a,b){var c=1<b.length;a=a.map(function(a){return new Jd(a,c)});return new G(a,b)}function Jd(a,b){this.va=a;this.id=Kd++;this.Yd=b}var Kd=0;function H(a,b){var c=b.Ka;return null!==c&&a.va.m.hasOwnProperty(c)?a.va.m[c]:a.Yd?a.va.m[Ld(b.H())][b.getName()]:a.va.m[b.getName()]}function Md(a,b,c){var d=b.Ka;if(null!=d)a.va.m[d]=c;else if(a.Yd){var d=Ld(b.H()),e=a.va.m[d];null==e&&(e={},a.va.m[d]=e);e[b.getName()]=c}else a.va.m[b.getName()]=c}
function Nd(a,b,c,d){function e(a,b){if(a.Yd){a=a.va.m;for(var c in a)f[c]=a[c]}else f[b[0]]=a.va.m}var f={};e(a,b);e(c,d);a=new $b(-1,f);return new Jd(a,!0)};q("lf.bind",function(a){return new Od(a)});function Od(a){this.fa=a}q("lf.Binder",Od);Od.prototype.Ca=g("fa");function Pd(){this.Ye=Qd();var a=Rd();this.Ob=y();this.Ob.set(1,Sd());this.Ob.set(2,Td());this.Ob.set(4,a);this.Ob.set(3,a);this.Ob.set(5,Ud());this.Ob.set(6,Vd())}var Wd;function Xd(){null!=Wd||(Wd=new Pd);return Wd}function Yd(a,b,c){a=a.Ob.get(b)||null;if(null===a)throw new D(550);c=a.get(c)||null;if(null===c)throw new D(550);return c}
function Qd(){function a(a){return a}var b=y();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}function Sd(){var a=y();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Rd(){var a=Sd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Ud(){var a=Rd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}function Vd(){var a=y();a.set("eq",function(a,c){if(null!==c)throw new D(550);return null===a});a.set("neq",function(a,c){if(null!==c)throw new D(550);return null!==a});return a}
function Td(){var a=y();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(b){return b.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function I(){this.h=this.D=null}var Zd=[];I.prototype.getParent=g("D");I.prototype.fb=function(){for(var a=this;null!==a.getParent();)a=a.getParent();return a};function $d(a){for(var b=0;null!==a.getParent();)b++,a=a.getParent();return b}function J(a){return a.h||Zd}function ae(a,b){return J(a)[b]||null}function be(a,b,c){b.D=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function L(a,b){b.D=a;null===a.h?a.h=[b]:a.h.push(b)}
function ce(a,b){var c=a.h&&a.h[b];return c?(c.D=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}I.prototype.removeChild=function(a){return ce(this,J(this).indexOf(a))};function de(a,b,c){ae(a,c).D=null;b.D=a;a.h[c]=b}function ee(a,b,c){!1!==b.call(c,a)&&J(a).forEach(function(a){ee(a,b,c)})};function fe(){I.call(this);this.sa=ge++}r(fe,I);var ge=0;m=fe.prototype;m.eval=fa;m.Pc=fa;m.Fb=fa;m.eb=fa;m.o=fa;m.W=g("sa");function he(a,b,c){fe.call(this);this.J=a;this.value=b;this.F=c;this.vc=Yd(Xd(),this.J.I(),this.F);this.Wa=!1;this.cc=b}r(he,fe);m=he.prototype;m.Fb=function(){var a=new he(this.J,this.value,this.F);a.cc=this.cc;a.Pc(this.Wa);var b=this.W();a.sa=b;return a};m.eb=function(a){return null!=a?(a.push(this.J),a):[this.J]};m.o=function(a){a=null!=a?a:B();a.add(this.J.H());return a};m.Pc=ba("Wa");
function ie(a){var b=!1;a.value instanceof Od||(b="array"==ga(a.value)?!a.value.some(function(a){return a instanceof Od}):!0);if(!b)throw new D(501);}m.eval=function(a){ie(this);if("in"==this.F)return je(this,a);var b=a.entries.filter(function(a){return this.vc(H(a,this.J),this.value)!=this.Wa},this);return new G(b,a.o())};
m.bind=function(a){if(this.cc instanceof Od){var b=this.cc.Ca();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==ga(this.cc)&&(this.value=this.cc.map(function(b){if(b instanceof Od){var c=b.Ca();if(a.length<=c)throw new D(510);return a[b.Ca()]}return b}))};function je(a,b){var c=B(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Wa}.bind(a);a=b.entries.filter(function(a){return d(H(a,this.J))},a);return new G(a,b.o())}
m.toString=function(){return"value_pred("+this.J.j()+" "+this.F+(this.Wa?"(complement)":"")+" "+this.value+")"};m.md=function(){ie(this);return null!==this.value&&("between"==this.F||"in"==this.F||"eq"==this.F||"gt"==this.F||"gte"==this.F||"lt"==this.F||"lte"==this.F)};
m.we=function(){var a=null;if("between"==this.F)a=new E(ke(this,this.value[0]),ke(this,this.value[1]),!1,!1);else{if("in"==this.F)return a=this.value.map(function(a){return new E(a,a,!1,!1)}),new zd(this.Wa?yd(a):a);a=ke(this,this.value);a="eq"==this.F?new E(a,a,!1,!1):"gte"==this.F?new E(a,F,!1,!1):"gt"==this.F?new E(a,F,!0,!1):"lte"==this.F?new E(F,a,!1,!1):new E(F,a,!1,!0)}return new zd(this.Wa?rd(a):[a])};function ke(a,b){return 2==a.J.I()?b.getTime():b};function le(a){this.da=a;this.Yc=this.Ga=null}function me(a,b){null===a.Ga&&null!=a.w&&(a.Ga=ne(a.w));return a.Ga.get(b)||null}function ne(a){var b=y();ee(a,function(a){b.set(a.W(),a)});return b}le.prototype.ca=fa;le.prototype.clone=fa;function pe(a,b){b.w&&(a.w=b.w.Fb());a.Yc=b}le.prototype.bind=function(){return this};function qe(a,b){a=a.w;null!=a&&ee(a,function(a){a instanceof he&&a.bind(b)})};function re(a){le.call(this,a)}r(re,le);function se(a){var b="";a.forEach(function(c,d){b+=c.J.j()+" ";b+=1==c.order?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}re.prototype.ca=function(){return B(this.from)};re.prototype.clone=function(){var a=new re(this.da);pe(a,this);this.f&&(a.f=this.f.slice());this.from&&(a.from=this.from.slice());a.X=this.X;a.L=this.L;this.N&&(a.N=this.N.slice());this.ra&&(a.ra=this.ra.slice());this.Sb&&(a.Sb=this.Sb);this.Zb&&(a.Zb=this.Zb);a.hb=this.hb;return a};
re.prototype.bind=function(a){re.jb.bind.call(this,a);null!=this.Sb&&(this.X=a[this.Sb.Ca()]);null!=this.Zb&&(this.L=a[this.Zb.Ca()]);qe(this,a);return this};function te(a,b){this.Ha=a;this.aa=b}te.prototype.fb=g("Ha");te.prototype.ca=g("aa");function ue(a){var b=B();a.forEach(function(a){a.ca().forEach(b.add.bind(b))});return b};function ve(a,b){this.global=a;this.Oa=a.b(nc);this.ud=b.map(function(a){return a.context});this.hf=b.map(function(a){return a.ie});this.Md=ue(this.hf);this.xe=we(this);this.Eb=w()}function we(a){return a.ud.some(function(a){return!(a instanceof re)})?1:0}m=ve.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.fb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return v()}var b=0==this.xe?void 0:new md(this.global,this.Md),c=[],d=this.hf.slice(),e=this.ud;return a().then(function(){this.ja=this.Oa.Hb(this.xe,C(this.Md),b);return this.ja.ka()}.bind(this)).then(function(){this.fe(c);return c}.bind(this),function(a){null!=b&&b.Lb();throw a;})};m.I=g("xe");m.ca=g("Md");m.W=function(){return la(this)};m.getPriority=fa;
m.fe=aa();m.Y=function(){var a=null;null!=this.ja&&(a=this.ja.Y());return null===a?new A(!1,0,0,0,0):a};function xe(a,b){ve.call(this,a,b);this.Kb=a.b(sc)}r(xe,ve);xe.prototype.getPriority=l(0);xe.prototype.fe=function(a){this.ud.forEach(function(b,c){ye(this.Kb,b,a[c])},this)};function ze(a,b){this.c=a;this.Kb=a.b(sc);this.Ia=a.b(rc);this.hd=new Jc(a);this.kb=b;var c=a.b(tc);a=this.kb.map(function(a){return c.table(a.getName())});this.aa=B(a);this.Eb=w()}m=ze.prototype;m.exec=function(){this.hd.update(this.kb);this.Nc();return v()};m.I=l(1);m.ca=g("aa");m.W=function(){return la(this)};m.getPriority=l(1);m.Nc=function(){var a=Ae(this.Kb,this.aa);0!=a.length&&(a=new xe(this.c,a),Be(this.Ia,a))};function Ce(a){this.c=a;this.Oa=a.b(nc);this.Ia=a.b(rc)}Ce.prototype.de=function(a){a=new ze(this.c,a);Be(this.Ia,a)};function M(a,b){this.Ua=a;this.i=b;this.$a=y()}q("lf.backstore.FirebaseRawBackStore",M);M.prototype.dd=g("i");M.prototype.ed=function(){throw new D(351);};function De(a,b){var c=w(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function Ee(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=w();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Ea=function(a){return De(this.i,"@rev/R").then(function(a){this.Sa=a;return De(this.i,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.$a.set(d,b[d]),b[d]>c&&(c=b[d]);a.oa().forEach(function(a){this.$a.has(a.getName())||(b[a.getName()]=++c)},this);d=this.i.child("@table");return Ee(d,b)}.bind(this))};
function Fe(a,b,c){var d=a.$a.get(b);return null!=d?function(){var a={},b=w();this.i.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Sa};return Ee(this.i,a)}.bind(a)):v()}M.prototype.tc=function(a){return Fe(this,a,l(null)).then(function(){this.$a.delete(a);return Ee(this.i.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.tc;
M.prototype.rc=function(a,b,c){return Fe(this,a,function(a){var d=a.P;d[b]=c;return{R:this.Sa+1,T:a.T,P:d}}.bind(this))};M.prototype.addTableColumn=M.prototype.rc;M.prototype.uc=function(a,b){return Fe(this,a,function(a){var c=a.P;delete c[b];return{R:this.Sa+1,T:a.T,P:c}}.bind(this))};M.prototype.dropTableColumn=M.prototype.uc;M.prototype.Mc=function(a,b,c){return Fe(this,a,function(a){var d=a.P;d[c]=d[b];delete d[b];return{R:this.Sa+1,T:a.T,P:d}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Mc;
M.prototype.mb=function(){throw new D(351);};M.prototype.createRow=M.prototype.mb;M.prototype.Dc=g("Ua");M.prototype.getVersion=M.prototype.Dc;M.prototype.fc=function(a){var b=w();a=this.$a.get(a);this.i.orderByChild("T").equalTo(a).once("value",function(a){var c=[];a.forEach(function(a){c.push(a.val().P)});b.resolve(c)});return b.ha};M.prototype.dump=function(){var a={},b=Zb(this.$a).map(function(b){return this.fc(b).then(function(c){a[b]=c})}.bind(this));return eb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function Ge(a,b,c){fc.call(this,b,c);this.i=a}r(Ge,fc);Ge.prototype.H=function(a){return this.i.Bc(a)};
Ge.prototype.ec=function(){if(0==this.yd)return this.S.resolve(),this.S.ha;var a=this.Ra.kb;if(0==a.size)this.S.resolve();else{var b=this.i.Sa+1;this.i.Sa=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var d=this.i.$a.get(e);a.wa.forEach(function(a,e){c[e]={R:b,T:d,P:a.m}});a.la.forEach(function(a,e){c[e]={R:b,T:d,P:a[1].m}});a.xa.forEach(function(a,b){c[b]=null})},this);this.i.i.update(c,function(c){null===c?this.S.resolve():(this.i.Sa=b-1,c=z(a).map(function(a){return He(this.i,a.getName())},this),
eb(c).then(this.S.reject.bind(this.S),this.S.reject.bind(this.S)))}.bind(this))}return this.S.ha};function Ie(){this.Ba=y()}function Je(a,b){if(0==b.length)return z(a.Ba);var c=[];b.forEach(function(a){a=this.Ba.get(a)||null;null===a||c.push(a)},a);return c}Ie.prototype.getData=g("Ba");Ie.prototype.get=function(a){return v(Je(this,a))};function Ke(a,b){b.forEach(function(a){this.Ba.set(a.id(),a)},a)}Ie.prototype.put=function(a){Ke(this,a);return v()};function Le(a,b){0==b.length||b.length==a.Ba.size?a.Ba.clear():b.forEach(function(a){this.Ba.delete(a)},a)}
Ie.prototype.remove=function(a){Le(this,a);return v()};function Me(a){return 0==a.Ba.size?0:Zb(a.Ba).reduce(function(a,c){return a>c?a:c},0)};function Ne(a,b){this.g=a;this.Cf=b;this.Lc=y();this.Sa=-1;this.M=y();this.$a=y();this.Jd=null}m=Ne.prototype;
m.Ea=function(a){this.i=this.Cf.child(this.g.name());var b=a||function(){return v()};return De(this.i,"@db/version").then(function(a){return null===a?Ee(this.i,Oe(this),!0).then(function(){var a=new M(0,this.i);return b(a)}.bind(this)).then(function(){return this.Ea()}.bind(this)):a==this.g.version()?De(this.i,"@rev/R").then(function(a){this.Sa=a;return De(this.i,"@table")}.bind(this)).then(function(a){for(var b in a)this.$a.set(b,a[b]);a=this.g.oa().map(function(a){return He(this,a.getName())},this);
return eb(a)}.bind(this)).then(function(){Pe(this);Qe(this);return v()}.bind(this)):this.ge(a,b).then(function(){return this.Ea()}.bind(this))}.bind(this))};m.ge=function(a,b){var c=new M(a,this.i);return c.Ea(this.g).then(function(){return v()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.i.child("@db");return Ee(a,{version:this.g.version()},!0)}.bind(this))};
function Qe(a){a.i.off();a.i.on("child_removed",a.zg.bind(a));a.Kd&&(a.Kd.off(),a.Lc.clear());a.Kd=a.i.orderByChild("R").startAt(a.Sa+1);a.Kd.on("value",a.de.bind(a))}function Pe(a){ac=z(a.M).map(function(a){return Me(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.zg=function(a){var b=a.val(),c=this.Lc.get(b.T)||null;null===c&&(c=B(),this.Lc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.de=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Sa&&(this.Sa=b,a=Re(this,a),a.forEach(function(a){var b=this.M.get(a.getName()),c=Zb(a.xa);0<c.length&&Le(b,c);var f=z(a.wa);a.la.forEach(function(a){f.push(a[1])});Ke(b,f)},this),0<a.length&&this.Hc(a),Qe(this))};
function Re(a,b){var c=B(),d=y();a.$a.forEach(function(a,b){var e=this.M.get(b),f=new kd(b);this.Lc.has(a)&&(b=C(this.Lc.get(a)),b.forEach(function(a){c.add(a)}),Je(e,b).forEach(function(a){f.delete(a)}));d.set(a,f)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var e=a.val();a=d.get(e.T);var k=this.M.get(a.getName()),e=this.g.table(a.getName()).cb({id:b,value:e.P});k.getData().has(b)?a.modify([Je(k,[b])[0],e]):a.add(e)}}}.bind(a));return z(d).filter(function(a){return!a.kd()})}
function He(a,b){var c=w(),d=a.$a.get(b),e=a.g.table(b);a.i.orderByChild("T").equalTo(d).once("value",function(a){var d=new Ie,f=[];a.forEach(function(a){f.push(e.cb({id:parseInt(a.key(),10),value:a.val().P}))});Ke(d,f);this.M.set(b,d);c.resolve()}.bind(a));return c.ha}function Oe(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Sa=1;b["@table"]={};a.g.oa().forEach(function(a,d){a=a.getName();b["@table"][a]=d;this.M.set(a,new Ie);this.$a.set(a,d)},a);return b}
m.Hb=function(a,b,c){return new Ge(this,a,c)};m.Bc=function(a){var b=this.M.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ba("Jd");m.Hc=function(a){null!=this.Jd&&this.Jd(a)};function N(a,b,c,d){this.i=b;this.ja=c;this.Ua=a;this.Wc=d}q("lf.backstore.IndexedDBRawBackStore",N);N.prototype.dd=g("i");N.prototype.getRawDBInstance=N.prototype.dd;N.prototype.ed=g("ja");N.prototype.getRawTransaction=N.prototype.ed;N.prototype.tc=function(a){return new u(function(b,c){try{this.i.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.tc;
function Se(a,b,c,d){return new u(function(a,f){var e;try{var k=this.ja.objectStore(b);e=k.openCursor()}catch(p){f(p);return}e.onsuccess=function(){var b=e.result;b?(c(b),b.continue()):(d(k),a())};e.onerror=f},a)}function Te(a){return a instanceof ArrayBuffer?dc(a):a instanceof Date?a.getTime():a}
function Ue(a,b,c){function d(a){var b=Ec(a.value),d=b.m,e;for(e in d){var f=bc(d[e]);c(f);d[e]=f.Ja()}a.update(b.Ja())}function e(a){var b=bc(a.value);c(b);a.update(b.Ja())}return Se(a,b,a.Wc?d:e,aa())}N.prototype.rc=function(a,b,c){var d=Te(c);return Ue(this,a,function(a){a.m[b]=d})};N.prototype.addTableColumn=N.prototype.rc;N.prototype.uc=function(a,b){return Ue(this,a,function(a){delete a.m[b]})};N.prototype.dropTableColumn=N.prototype.uc;
N.prototype.Mc=function(a,b,c){return Ue(this,a,function(a){a.m[c]=a.m[b];delete a.m[b]})};N.prototype.renameTableColumn=N.prototype.Mc;function Ve(a,b){var c=[];return new u(function(a,e){var d;try{d=this.ja.objectStore(b).openCursor()}catch(h){e(h);return}d.onsuccess=function(){var b=d.result;if(b){if(this.Wc){var e=Ec(b.value).m,f;for(f in e)c.push(e[f])}else c.push(b.value);b.continue()}else a(c)}.bind(this);d.onerror=e},a)}N.prototype.mb=function(a){var b={},c;for(c in a)b[c]=Te(a[c]);return cc(b)};
N.prototype.createRow=N.prototype.mb;N.prototype.Dc=g("Ua");N.prototype.getVersion=N.prototype.Dc;N.prototype.dump=function(){for(var a=this.i.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.fc(d))}return eb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.fc=function(a){return Ve(this,a).then(function(a){return a.map(function(a){return a.value})})};function We(a,b){this.Z=a;this.Ib=b}We.prototype.get=function(a){if(0==a.length)return null!=this.Z.getAll?Xe(this):Ye(this);a=a.map(function(a){return new u(function(b,d){var c;try{c=this.Z.get(a)}catch(f){d(f);return}c.onerror=d;c.onsuccess=function(a){b(this.Ib(a.target.result))}.bind(this)},this)},this);return eb(a)};
function Ye(a){return new u(function(a,c){var b=[],e;try{e=this.Z.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(b.push(this.Ib(c.value)),c.continue()):a(b)}.bind(this)},a)}function Xe(a){return new u(function(a,c){var b;try{b=this.Z.getAll()}catch(e){c(e);return}b.onerror=c;b.onsuccess=function(){var c=b.result.map(function(a){return this.Ib(a)},this);a(c)}.bind(this)},a)}
We.prototype.Tb=function(a){return new u(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};We.prototype.put=function(a){if(0==a.length)return v();a=a.map(function(a){return this.Tb(function(){return this.Z.put(a.Ja())}.bind(this))},this);return eb(a)};
We.prototype.remove=function(a){return new u(function(b,c){var d=this.Z.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Tb(function(){return this.Z.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Tb(function(){return this.Z.delete(a)}.bind(this))},this);eb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Ze(a,b,c,d,e){fc.call(this,c,e);this.c=a;this.ja=b;this.Wc=d;this.ja.oncomplete=this.S.resolve.bind(this.S);this.ja.onabort=this.S.reject.bind(this.S)}r(Ze,fc);Ze.prototype.H=function(a,b,c){return this.Wc?(c=null!=c?c:0,a=this.ja.objectStore(a),new Fc(a,b,0==c?ra(Hc,this.c):Ic)):new We(this.ja.objectStore(a),b)};Ze.prototype.ec=function(){return this.S.ha};function $e(a,b){this.c=a;this.g=b;this.Gd=b.je.Sf||!1}m=$e.prototype;
m.Ea=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return v()};return new u(function(a,e){var d;try{d=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}d.onerror=function(a){a=a.target.error;e(new D(361,a.name,a.message))};d.onupgradeneeded=function(a){af(this,c,a).then(aa(),e)}.bind(this);d.onsuccess=function(b){this.i=b.target.result;this.qe().then(function(b){ac=Math.max(ac,b+1);a(this.i)}.bind(this))}.bind(this)},
this)};function af(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.Gd);bf(d);a.g.oa().forEach(ra(a.Lf,d),a);return b(c)}function bf(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(f){}})}
m.Lf=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Db()&&(b.Da().forEach(function(b){cf(a,b.j())},this),cf(a,df(b)))};function cf(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Hb=function(a,b,c){b=this.i.transaction(ef(b),0==a?"readonly":"readwrite");return new Ze(this.c,b,a,this.Gd,c)};
function ef(a){var b=B();a.forEach(function(a){b.add(a.getName());a.Db()&&(a.Da().forEach(function(a){b.add(a.j())}),b.add(df(a)))});return C(b)}
m.qe=function(a){function b(){if(0==d.length)return v();var a=d.shift();return c(a).then(b)}function c(b){return new u(function(c,d){var k;try{k=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ca){d(ca);return}k.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};k.onerror=function(){c(f)}})}var d=this.g.oa().map(function(a){return a.getName()}),e=this.i,f=0,h=function(a){return this.Gd?(a=Ec(a.value),Object.keys(a.m).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new u(function(a){b().then(function(){a(f)})})};m.close=function(){this.i.close()};m.Bc=function(){throw new D(511);};m.subscribe=aa();m.Hc=aa();function ff(a,b,c){fc.call(this,b,c);this.Z=a;0==b&&this.S.resolve()}r(ff,fc);ff.prototype.H=function(a){return this.Z.Bc(a)};ff.prototype.ec=function(){this.S.resolve();return this.S.ha};function gf(a){this.g=a;this.M=y()}m=gf.prototype;m.Ea=function(){this.g.oa().forEach(this.gg,this);return v()};m.Bc=function(a){var b=this.M.get(a)||null;if(null===b)throw new D(101,a);return b};m.Hb=function(a,b,c){return new ff(this,a,c)};function hf(a,b){if(!a.M.has(b)){var c=new Ie;a.M.set(b,c)}}m.gg=function(a){hf(this,a.getName());a.Db()&&(a.Da().forEach(function(a){hf(this,a.j())},this),hf(this,df(a)))};m.close=aa();m.subscribe=aa();m.Hc=aa();function jf(a){gf.call(this,a);this.qd=null}r(jf,gf);jf.prototype.subscribe=function(a){null===this.qd&&(this.qd=a)};jf.prototype.Hc=function(a){null===this.qd||this.qd(a)};function kf(a,b,c){this.ja=a;this.A='"'+b+'"';this.Ib=c}kf.prototype.get=function(a){var b=this.Ib;return mf(this.ja,"SELECT id, value FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var c=a.rows.length,e=Array(c),f=0;f<c;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
kf.prototype.put=function(a){if(0==a.length)return v();var b="INSERT OR REPLACE INTO "+this.A+"(id, value) VALUES (?, ?)";a.forEach(function(a){mf(this.ja,b,[a.id(),JSON.stringify(a.m)])},this);return v()};kf.prototype.remove=function(a){mf(this.ja,"DELETE FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return v()};function nf(a,b,c){fc.call(this,b,c);this.i=a;this.M=y();this.Nd=[]}r(nf,fc);function of(a){return a.replace(".","__d__").replace("#","__s__")}nf.prototype.H=function(a,b){var c=this.M.get(a)||null;null===c&&(c=new kf(this,of(a),b),this.M.set(a,c));return c};function mf(a,b,c,d){var e=w();a.Nd.push({Ng:b,Dg:c,transform:d,S:e});return e.ha}
nf.prototype.ec=function(){var a=null,b=this.S.reject.bind(this.S),c=function(a,b){this.S.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var f=h;null!=a.transform&&null!=h&&(f=a.transform(h));d.push(f);a.S.resolve(f)}0<this.Nd.length?(a=h=this.Nd.shift(),b.executeSql(h.Ng,h.Dg,e,c)):this.S.resolve(d)}.bind(this);0==this.yd?this.i.readTransaction(e,b):this.i.transaction(e,b);return this.S.ha};function O(a,b,c){this.i=c;this.c=a;this.Ua=b}q("lf.backstore.WebSqlRawBackStore",O);O.prototype.dd=g("i");O.prototype.getRawDBInstance=O.prototype.dd;O.prototype.ed=function(){throw new D(356);};O.prototype.getRawTransaction=O.prototype.ed;function pf(a){return new nf(a.i,1,new md(a.c,B()))}O.prototype.tc=function(a){var b=pf(this);mf(b,"DROP TABLE "+a,[]);return b.ka()};O.prototype.dropTable=O.prototype.tc;
O.prototype.fc=function(a){var b=pf(this);mf(b,"SELECT id, value FROM "+a,[]);return b.ka().then(function(a){for(var b=a[0].rows.length,c=Array(b),f=0;f<b;++f)c[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return v(c)})};function qf(a,b,c){var d=pf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.fc(b).then(function(a){a.forEach(function(a){a=c(a);mf(d,e,[JSON.stringify(a.value),a.id])});return d.ka()})}
O.prototype.rc=function(a,b,c){var d=Te(c);return qf(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.rc;O.prototype.uc=function(a,b){return qf(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.uc;O.prototype.Mc=function(a,b,c){return qf(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Mc;O.prototype.mb=function(a){var b={},c;for(c in a)b[c]=Te(a[c]);return cc(b)};
O.prototype.createRow=O.prototype.mb;O.prototype.Dc=g("Ua");O.prototype.getVersion=O.prototype.Dc;function rf(a){mf(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var b=Array(a.rows.length),d=0;d<b.length;++d)b[d]=a.rows.item(d).tbl_name;return b})}
O.prototype.dump=function(){var a=w(),b=pf(this);rf(b);var c={};b.ka().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.fc(a).then(function(b){c[a]=b})},this);eb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};O.prototype.dump=O.prototype.dump;function sf(a,b,c){this.c=a;this.g=b;this.Mg=c||1}m=sf.prototype;m.Ea=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return v()};return new u(function(a,d){var c=window.openDatabase(this.g.name(),"",this.g.name(),this.Mg);if(null!=c)this.i=c,tf(this,b).then(function(){this.qe().then(a,d)}.bind(this),function(a){if(a instanceof D)throw a;throw new D(354,a.message);});else throw new D(354);},this)};
function tf(a,b){var c=w(),d=new nf(a.i,1,new md(a.c,B()));mf(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);mf(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ka().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.ge(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new D(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.ha}m.Hb=function(a,b,c){if(null!=this.i)return new nf(this.i,a,c);throw new D(2);};m.close=aa();
m.Bc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Hc=function(){throw new D(355);};m.ge=function(a,b){return uf(this).then(function(){return a(new O(this.c,b,this.i))}.bind(this))};
function uf(a){var b=a.g.oa(),c=new nf(a.i,1,new md(a.c,B())),d=new nf(a.i,1,new md(a.c,B()));mf(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);rf(c);return c.ka().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){mf(d,"DROP TABLE "+('"'+a+'"'),[])});var e=[],k=[],p=[];b.map(function(a){-1==c.indexOf(a.getName())&&e.push(a.getName());a.Db&&(a.Da().forEach(function(a){a=of(a.j());e.push(a);k.push(a)}),a=of(df(a)),e.push(a),p.push(a))});
e.forEach(function(a){mf(d,"CREATE TABLE "+('"'+a+'"')+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ka()})}m.qe=function(){var a=0,b=w(),c=function(b){var c=new nf(this.i,0);mf(c,"SELECT MAX(id) FROM "+('"'+b+'"'),[]);return c.ka().then(function(b){b=b[0].rows.item(0)["MAX(id)"];a=Math.max(b,a)})}.bind(this),d=this.g.oa().map(function(a){return c(a.getName())});eb(d).then(function(){ac=Math.max(ac,a+1);b.resolve()},function(a){b.reject(a)});return b.ha};function vf(a){this.l=y();this.$b=y();a.oa().forEach(function(a){this.$b.set(a.getName(),B())},this)}m=vf.prototype;m.set=function(a,b){this.l.set(b.id(),b);this.$b.get(a).add(b.id())};m.Wb=function(a,b){var c=this.$b.get(a);b.forEach(function(a){this.l.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.l.get(a)||null};function wf(a,b){return b.map(function(a){return this.get(a)},a)}
m.Va=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.$b.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.l.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.l.get(b),d.push(c));return d};m.remove=function(a,b){this.l.delete(b);this.$b.get(a).delete(b)};m.Ac=function(a){return null!=a?this.$b.get(a).size:this.l.size};m.clear=function(){this.l.clear();this.$b.clear()};function xf(a,b,c){var d=0,e=a.length;for(c=c||yf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function yf(a,b){return a-b}function zf(a,b,c){c=xf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function Af(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(n(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function Bf(){this.ia=0;this.Gc=null}Bf.prototype.add=function(a,b){this.ia+=b;this.Gc=null===this.Gc?a:a>this.Gc?a:this.Gc};Bf.prototype.remove=function(a,b){this.ia-=b};Bf.prototype.clear=function(){this.ia=0};function Cf(a,b){a.clear();b.forEach(function(a){this.ia+=a.ia},a)};function Df(a,b,c,d){this.A=a;this.$=b;this.xf=c;this.za=new Bf;if(d){a=511;a*=a*a;if(d.length>=a)throw new D(6,a);d=Ef(this,d);this.ua=d=Ff(d)}else this.clear()}var Gf=[];m=Df.prototype;m.getName=g("A");m.toString=function(){return this.ua.toString()};m.add=function(a,b){this.ua=this.ua.Bb(a,b)};m.set=function(a,b){this.ua=this.ua.Bb(a,b,!0)};m.remove=function(a,b){this.ua=this.ua.remove(a,b)};m.get=function(a){return this.ua.get(a)};
m.ad=function(a){if(null==a)return this.Y().ia;if(a instanceof E){if(sd(a))return this.Y().ia;if(wd(a))return this.get(a.from).length}return this.Va([a]).length};m.Y=g("za");m.Vd=function(a,b,c,d){c=Array(a);this.ua.fill({offset:b?this.za.ia-a-d:d,count:a,te:0},c);return b?c.reverse():c};
m.Va=function(a,b,c,d){var e=Hf(this.ua).a[0];if(!n(e)||0==c)return Gf;b=b||!1;c=null!=c?Math.min(c,this.za.ia):this.za.ia;d=d||0;var f=Math.min(Math.max(this.za.ia-d,0),c);if(0==f)return Gf;if(!n(a)||1==a.length&&a[0]instanceof E&&sd(a[0]))return this.Vd(f,b,c,d);a=this.$.tf(a);var h=Array(b?this.za.ia:f),k={count:0,X:h.length,reverse:b,L:d},p=1<this.lb().Zd();a.forEach(function(a){for(var b=this.$.vd(a),b=this.$.Xd(a)?e:b[0],b=this.ua.Yf(b),c=0;null!=b&&k.count<k.X;){if(p){for(var d=b,f=a,K=k,Eb=
h,Uc=d.u.lb(),oe=-1,Oa=0;Oa<d.a.length;++Oa)if(Uc.Cb(d.a[Oa],f)){oe=Oa;break}if(-1!=oe)for(Oa=oe;Oa<d.a.length&&K.count<K.X;++Oa)Uc.Cb(d.a[Oa],f)&&If(d,K,Eb,Oa)}else b.Va(a,k,h);0!=k.L||b.ld(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?Af(h,b,c,d):h};m.clear=function(){this.ua=Jf(this);this.za.clear()};m.Pa=function(a){return this.ua.Pa(a)};m.min=function(){return this.Jb(this.$.min.bind(this.$))};m.max=function(){return this.Jb(this.$.max.bind(this.$))};
function Kf(a,b,c){if(!a.$.Od(b.a[c]))if(1<b.a[c].length){if(null===b.a[c][0])return null}else return null;return[b.a[c],a.xf?[b.B[c]]:b.B[c]]}m.Jb=function(a){var b;a:{b=Hf(this.ua);var c=0;do if(c>=b.a.length)b=b.ya,c=0;else{var d=Kf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Lf(this.ua);d=c.a.length-1;do if(0>d)c=c.rb,d=0;else{var e=Kf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ma=g("xf");m.lb=g("$");
m.Qa=function(a,b){return null!=a?0==this.$.compare(a,b):!1};m.Ja=function(){for(var a=[],b=Hf(this.ua);b;)a.push(new $b(b.sa,[b.a,b.B])),b=b.ya;return a};function Mf(a,b,c,d){a=new Df(b,a,c);d=Nf(d,a);a.ua=d;return a}function Of(a,b){this.sa=a;this.u=b;this.nb=0;this.ya=this.rb=this.D=null;this.a=[];this.B=[];this.h=[];this.Yf=1==b.lb().Zd()?this.Oe:this.Ne}function Jf(a){return new Of(ac++,a)}function P(a){return 0==a.nb}m=Of.prototype;m.next=g("ya");
function Pf(a){function b(a){return null!=a?a.sa.toString():"_"}var c=a.sa+"["+a.a.join("|")+"]",d=a.h.map(function(a){return a.sa}).join("|"),e=a.B.join("/"),f=b(a.rb)+"{",f=P(a)?f+e:f+d,f=f+"}"+b(a.D);a.ya&&(a=Pf(a.ya),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Pf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function Hf(a){return P(a)?a:Hf(a.h[0])}function Lf(a){return P(a)?a:Lf(a.h[a.h.length-1])}
function Qf(a,b){b&&(b.rb=a);a&&(a.ya=b)}function Ef(a,b){for(var c=b.length,d=0,e=a=Jf(a);0<c;){var f=768<=c?511:257<=c&&511>=c?c:257,h=b.slice(d,d+f);a.a=h.map(function(a){return a.key});a.B=h.map(function(a){return a.value});d+=f;c-=f;0<c&&(f=Jf(a.u),Qf(a,f),a=f)}return e}function Rf(a){var b=a[0],c=Jf(b.u);c.nb=b.nb+1;c.h=a;for(b=0;b<a.length;++b)a[b].D=c,0<b&&c.a.push(a[b].a[0]);return c}
function Ff(a){var b=a,c=[];do c.push(b),b=b.ya;while(b);if(512>=c.length)b=Rf(c);else{var d=c.length,e=0,b=Jf(a.u);for(b.nb=a.nb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Rf(f);h.D=b;b.h.length&&(b.a.push(f[0].a[0]),Qf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Sf(this,a);if(P(this)){var c=Gf;this.u.Qa(this.a[b],a)&&(c=c.concat(this.B[b]));return c}b=this.u.Qa(this.a[b],a)?b+1:b;return this.h[b].get(a)};
m.Pa=function(a){var b=Sf(this,a);return this.u.Qa(this.a[b],a)?!0:P(this)?!1:this.h[b].Pa(a)};m.remove=function(a,b){Tf(this,a,-1,b);return null===this.D?(a=this,1==this.h.length&&(a=this.h[0],a.D=null),a):this};function Uf(a){return P(a)?a.a[0]:Uf(a.h[0])}function Vf(a){a.a=[];for(var b=1;b<a.h.length;++b)a.a.push(Uf(a.h[b]))}
function Tf(a,b,c,d){var e=Sf(a,b),f=P(a);if(!f){var h=a.u.Qa(a.a[e],b)?e+1:e;if(Tf(a.h[h],b,h,d))Vf(a);else return!1}else if(!a.u.Qa(a.a[e],b))return!1;if(a.a.length>e&&a.u.Qa(a.a[e],b)){if(n(d)&&!a.u.Ma()&&f&&(h=a.B[e],d=xf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.u.Y().remove(b,1),a.B[e].length))return!1;a.a.splice(e,1);f&&(f=a.u.Ma()?1:a.B[e].length,a.B.splice(e,1),a.u.Y().remove(b,f))}if(256>a.a.length&&null!==a.D){a:{if(a.ya&&256<a.ya.a.length)b=a.ya,e=d=0,f=a.a.length+1;else if(a.rb&&
256<a.rb.a.length)b=a.rb,d=a.rb.a.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.a.splice(f,0,b.a[d]);b.a.splice(d,1);d=P(a)?a.B:a.h;P(a)?h=b.B:(h=b.h,h[e].D=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(Vf(b),Vf(a));b=!0}b||Wf(a,c)}return!0}
function Wf(a,b){var c,d,e;a.ya&&511>a.ya.a.length?(c=a.ya,e=d=0):a.rb&&(c=a.rb,d=c.a.length,e=P(c)?c.B.length:c.h.length);d=[d,0].concat(a.a);Array.prototype.splice.apply(c.a,d);d=null;P(a)?d=a.B:(d=a.h,d.forEach(function(a){a.D=c}));d=[e,0].concat(d);Array.prototype.splice.apply(P(c)?c.B:c.h,d);Qf(a.rb,a.ya);P(c)||Vf(c);-1!=b&&(a.D.a.splice(b,1),a.D.h.splice(b,1))}
m.Bb=function(a,b,c){var d=Sf(this,a);if(P(this)){if(this.u.Qa(this.a[d],a)){if(c)this.u.Y().remove(a,this.u.Ma()?1:this.B[d].length),this.B[d]=this.u.Ma()?b:[b];else{if(this.u.Ma())throw new D(201,this.u.getName(),JSON.stringify(a));if(!zf(this.B[d],b))throw new D(109);}this.u.Y().add(a,1);return this}this.a.splice(d,0,a);this.B.splice(d,0,this.u.Ma()?b:[b]);this.u.Y().add(a,1);512==this.a.length?(d=Jf(this.u),a=Jf(this.u),a.nb=1,a.a=[this.a[256]],a.h=[this,d],a.D=this.D,this.D=a,d.a=this.a.splice(256),
d.B=this.B.splice(256),d.D=a,Qf(d,this.ya),Qf(this,d),d=a):d=this;return d}d=this.u.Qa(this.a[d],a)?d+1:d;a=this.h[d].Bb(a,b,c);P(a)||1!=a.a.length||(this.a.splice(d,0,a.a[0]),a.h[1].D=this,a.h[0].D=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.a.length?Xf(this):this};
function Xf(a){var b=Jf(a.u),c=Jf(a.u);b.D=a.D;b.nb=a.nb+1;b.a=[a.a[256]];b.h=[a,c];a.a.splice(256,1);c.D=b;c.nb=a.nb;c.a=a.a.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.D=c});a.D=b;Qf(c,a.ya);Qf(a,c);return b}function Sf(a,b){for(var c=0,d=a.a.length,e=a.u.lb();c<d;){var f=c+d>>1;-1==e.compare(a.a[f],b)?c=f+1:d=f}return c}m.Oe=function(a){if(!P(this)){var b=Sf(this,a);this.u.Qa(this.a[b],a)&&b++;return this.h[b].Oe(a)}return this};
m.Ne=function(a){if(!P(this)){var b=Sf(this,a);this.u.Qa(this.a[b],a)&&(a.some(function(a){return a==F})||b++);return this.h[b].Ne(a)}return this};
m.Va=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.u.lb(),f=0,h=this.a.length-1,k=this.a,p=d(e.xb(k[f],a)),K=d(e.xb(k[h],a));if(1!=p&&(-1!=p||-1!=K)){var ta=function(a,b){b=a+b>>1;return b==a?b+1:b},ca=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.xb(k[b],a));if(0==h)return b;if(1==h)return-1;h=ta(b,c);if(h==c)return 0==f?c:-1;var p=d(e.xb(k[h],a));return 0==p?ca(b,h,p):-1==p?ca(h+1,c,f):ca(b+1,h,p)},Db=function(b,c){if(b>=c)return b;var f=d(e.xb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=ta(b,c);if(f==c)return b;var h=d(e.xb(k[f],a));return 0==h?Db(f,c):1==h?Db(b,f-1):-1};0!=p&&(f=ca(f+1,h,K));-1!=f&&(h=Db(f,h),-1!=h&&h>=f&&Yf(this,b,c,f,h+1))}};function If(a,b,c,d){if(a.u.Ma())!b.reverse&&b.L?b.L--:c[b.count++]=a.B[d];else for(var e=0;e<a.B[d].length&&b.count<c.length;++e)!b.reverse&&b.L?b.L--:c[b.count++]=a.B[d][e]}function Yf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.X));++d)If(a,b,c,d)}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.B.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.u.Ma()?1:this.B[c].length,0>a.offset)for(var d=this.B[c].length+a.offset;d<this.B[c].length&&0<a.count;++d)b[a.te++]=this.B[c][d],a.count--}else if(this.u.Ma())b[a.te++]=this.B[c],a.count--;else for(d=0;d<this.B[c].length&&0<a.count;++d)b[a.te++]=this.B[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Nf(a,b){var c=b.Y();a=a.map(function(a){var d=new Of(a.id(),b);d.a=a.m[0];d.B=a.m[1];d.a.forEach(function(a,e){c.add(a,b.Ma()?1:d.B[e].length)});return d});for(var d=0;d<a.length-1;++d)Qf(a[d],a[d+1]);return 1<a.length?Ff(a[0]):a[0]}m.ld=function(a){return this.u.lb().ld(this.a[0],a)};function Zf(a){this.Zc=0==a?$f:ag;this.be=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.he=0==a?bg:dg}function ag(a,b){return a>b?1:a<b?-1:0}function $f(a,b){return ag(b,a)}function dg(a,b){return xd(a,b)}function bg(a,b){return xd(b,a)}m=Zf.prototype;m.xb=function(a,b){b=this.be(b);var c=[b.from==F,b.s==F];if(!c[0]){var d=this.Zc(a,b.from);c[0]=b.ea?1==d:-1!=d}c[1]||(d=this.Zc(a,b.s),c[1]=b.na?-1==d:1!=d);return c};m.compare=function(a,b){return this.Zc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Cb=function(a,b){a=this.xb(a,b);return a[0]&&a[1]};m.ld=function(a,b){return this.Cb(a,b)};m.tf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.he(a,c)}.bind(this))};m.Xd=function(a){return this.be(a).from==F};m.vd=function(a){a=this.be(a);return[a.from,a.s]};m.Od=function(a){return null!==a};m.Zd=l(1);
m.toString=function(){return this.compare==$f?"SimpleComparator_DESC":"SimpleComparator_ASC"};function eg(a){Zf.call(this,a);this.Zc=0==a?fg:gg}r(eg,Zf);function gg(a,b){return null===a?null===b?0:-1:null===b?1:ag(a,b)}function fg(a,b){return gg(b,a)}eg.prototype.Cb=function(a,b){return null===a?sd(b):eg.jb.Cb.call(this,a,b)};eg.prototype.Jb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};eg.prototype.min=function(a,b){var c=this.Jb(a,b);null===c&&(c=eg.jb.min.call(this,a,b));return c};
eg.prototype.max=function(a,b){var c=this.Jb(a,b);null===c&&(c=eg.jb.max.call(this,a,b));return c};function hg(a){this.pa=a.map(function(a){return new Zf(a)})}function ig(a,b,c,d){for(var e=0,f=0;f<a.pa.length&&0==e;++f)e=d(a.pa[f],b[f],c[f]);return e}m=hg.prototype;m.compare=function(a,b){return ig(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return ig(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return ig(this,a,b,function(a,b,e){return a.max(b,e)})};
m.xb=function(a,b){for(var c=[!0,!0],d=0;d<this.pa.length&&(c[0]||c[1]);++d){var e=this.pa[d].xb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Cb=function(a,b){for(var c=!0,d=0;d<this.pa.length&&c;++d)c=this.pa[d].Cb(a[d],b[d]);return c};m.ld=function(a,b){return this.pa[0].Cb(a[0],b[0])};
m.tf=function(a){var b=a.filter(function(a){return a.every(ha)});a=Array(this.pa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.pa[b].he(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,d=0;d<this.pa.length&&0==c;++d)c=this.pa[d].he(a[d],b[d]);return c}.bind(this))};m.Xd=function(a){return this.pa[0].Xd(a[0])};
m.vd=function(a){var b=a.map(function(a,b){return this.pa[b].vd(a)[0]},this);a=a.map(function(a,b){return this.pa[b].vd(a)[1]},this);return[b,a]};m.Od=function(a){return a.every(function(a,c){return this.pa[c].Od(a)},this)};m.Zd=function(){return this.pa.length};function jg(a){hg.call(this,a);this.pa=a.map(function(a){return new eg(a)})}r(jg,hg);function kg(a){if(1==a.f.length)return new Zf(a.f[0].order);var b=a.f.map(function(a){return a.order});return a.f.some(function(a){return a.da.ic()})?new jg(b):new hg(b)};function lg(a){this.fa=a;this.pb=B();this.Qc=new Bf;this.za=new Bf}m=lg.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.pb.add(b),this.Qc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.pb.clear(),this.Qc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.pb.delete(b),this.Qc.remove(a,1)):(this.pb.clear(),this.Qc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?C(this.pb):this.fa.get(a)};m.ad=function(a){return this.fa.ad(a)};
m.Y=function(){Cf(this.za,[this.fa.Y(),this.Qc]);return this.za};m.Va=function(a,b,c,d){b=this.fa.Va(a,b,c,d);return null!=a?b:b.concat(C(this.pb))};m.clear=function(){this.pb.clear();this.fa.clear()};m.Pa=function(a){return null===a?0!=this.pb.size:this.fa.Pa(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ja=function(){return[new $b(-2,C(this.pb))].concat(this.fa.Ja())};m.lb=function(){return this.fa.lb()};
function mg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);d=b[c].m;b=b.slice(0);b.splice(c,1);a=a(b);var e=new lg(a);d.forEach(function(a){e.pb.add(a)});return e}m.Ma=function(){return this.fa.Ma()};function ng(a){this.A=a;this.tb=B();this.$=new Zf(1)}m=ng.prototype;m.getName=g("A");m.add=function(a){if("number"!=typeof a)throw new D(103);this.tb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.tb.delete(a)};m.get=function(a){return this.Pa(a)?[a]:[]};m.min=function(){return this.Jb(this.$.min.bind(this.$))};m.max=function(){return this.Jb(this.$.max.bind(this.$))};
m.Jb=function(a){if(0==this.tb.size)return null;var b=C(this.tb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.ad=function(){return this.tb.size};m.Va=function(a,b,c,d){var e=a||[vd()];a=C(this.tb).filter(function(a){return e.some(function(b){return this.$.Cb(a,b)},this)},this);return Af(a,b,c,d)};m.clear=function(){this.tb.clear()};m.Pa=function(a){return this.tb.has(a)};m.Ja=function(){return[new $b(0,C(this.tb))]};m.lb=g("$");
function og(a,b){var c=new ng(a);b[0].m.forEach(function(a){c.add(a,a)});return c}m.Ma=l(!0);m.Y=function(){var a=new Bf;a.ia=this.tb.size;return a};function pg(a){this.Oa=a.b(nc);this.C=a.b(pc);this.V=a.b(oc)}pg.prototype.Ea=function(a){var b=a.oa(),c=function(){if(0==b.length)return v();var a=b.shift();return(a.Db()?qg(this,a):rg(this,a)).then(c)}.bind(this);return c()};function rg(a,b){var c=a.Oa.Hb(0,[b]);a=c.H(b.getName(),b.cb.bind(b),0).get([]).then(function(a){this.V.Wb(b.getName(),a);sg(this,b,a)}.bind(a));c.ka();return a}
function sg(a,b,c){var d=a.C.mc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.ob(b.getName());b.add(c,a.id())})})}function qg(a,b){var c=a.Oa.Hb(0,[b]),d=c.H(b.getName(),b.cb,0).get([]).then(function(a){this.V.Wb(b.getName(),a)}.bind(a));a=b.Da().map(function(a){return tg(this,a,c)},a).concat(ug(a,b,c));c.ka();return eb(a.concat(d))}
function tg(a,b,c){c=c.H(b.j(),bc,1);var d=kg(b);return c.get([]).then(function(a){if(0<a.length){if(vg(b)){var c=Mf.bind(void 0,d,b.j(),b.Ec);a=mg(c,a)}else a=Mf(d,b.j(),b.Ec,a);this.C.set(b.nc,a)}}.bind(a))}function ug(a,b,c){return c.H(df(b),bc,1).get([]).then(function(a){0<a.length&&(a=og(df(b),a),this.C.set(b.getName(),a))}.bind(a))};function wg(){this.Z=y();this.mc=y()}wg.prototype.Ea=function(a){a.oa().forEach(function(a){var b=[];this.mc.set(a.getName(),b);var d=df(a);if(null===this.get(d)){var e=new ng(d);b.push(e);this.Z.set(d,e)}a.Da().forEach(function(a){var c;c=kg(a);c=new Df(a.j(),c,a.Ec);c=vg(a)&&1==a.f.length?new lg(c):c;b.push(c);this.Z.set(a.j(),c)},this)},this);return v()};wg.prototype.get=function(a){return this.Z.get(a)||null};
wg.prototype.set=function(a,b){var c=this.mc.get(a)||null;null===c&&(c=[],this.mc.set(a,c));a=null;for(var d=0;d<c.length;d++)if(c[d].getName()==b.getName()){a=d;break}null!==a&&0<c.length?c.splice(a,1,b):c.push(b);this.Z.set(b.getName(),b)};function xg(a,b){var c=[],d=null,e=null;ee(a,function(a){var f=b(a);null==a.getParent()?e=f:L(d,f);var k=a.getParent();null!==k&&J(k).length==J(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<J(a).length&&c.push(f);d=null===a.h?c[c.length-1]:f});return e}function yg(a){return zg(a,function(a){return null===a.h})}
function Ag(a){var b=a.getParent(),c=0;null!==b&&(c=J(b).indexOf(a),b.removeChild(a));var d=J(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||be(b,d,c+f)});return{parent:b,children:d}}function Bg(a,b){J(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function Cg(a){var b=ae(a,0);Ag(a);Bg(b,a);return b}
function Dg(a,b,c){var d=ae(a,0),e=J(d).slice();if(!e.some(function(a){return b(a)}))return a;Ag(a);e.forEach(function(e,h){if(b(e)){var f=c(a);ce(d,h);L(f,e);be(d,f,h)}});return d}function Eg(a,b,c,d){var e=a.getParent();null!==e&&(a=J(e).indexOf(a),ce(e,a),be(e,c,a));J(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function zg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||J(a).forEach(d)}var e=[];d(a);return e}
function Fg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";ee(a,function(a){for(var b=0;b<$d(a);b++)d+="-";d+=c(a)});return d};function Gg(a){fe.call(this);this.qb=a;this.Wa=!1}r(Gg,fe);m=Gg.prototype;m.Fb=function(){return xg(this,function(a){if(a instanceof Gg){var b=new Gg(a.qb);b.Wa=a.Wa;a=a.W();b.sa=a;return b}return a.Fb()})};m.eb=function(a){var b=a||[];ee(this,function(a){a!=this&&a.eb(b)}.bind(this));a=B(b);return C(a)};m.o=function(a){var b=null!=a?a:B();ee(this,function(a){a!=this&&a.o(b)}.bind(this));return b};m.Pc=function(a){this.Wa!=a&&(this.Wa=a,this.qb="and"==this.qb?"or":"and",J(this).forEach(function(b){return b.Pc(a)}))};
m.eval=function(a){var b=J(this).map(function(b){return b.eval(a)});return Hg(this,b)};function Hg(a,b){return"and"==a.qb?Gd(b):Hd(b)}m.toString=function(){return"combined_pred_"+this.qb.toString()};m.we=function(){if("or"==this.qb){var a=new zd;J(this).forEach(function(b){b=b.we().qa();a.add(b)});return a}return new zd};m.md=function(){return"or"==this.qb?Ig(this):!1};
function Ig(a){var b=null;return J(a).every(function(a){if(!(a instanceof he&&a.md()))return!1;null===b&&(b=a.J);return b.j()==a.J.j()})};function Jg(a,b,c){fe.call(this);this.ga=a;this.ma=b;this.F=c;this.ce=null;a=Xd();this.vc=Yd(a,this.ga.I(),this.F);this.ng=a.Ye.get(this.ga.I())||null}r(Jg,fe);m=Jg.prototype;m.Fb=function(){var a=new Jg(this.ga,this.ma,this.F),b=this.W();a.sa=b;return a};m.eb=function(a){return null!=a?(a.push(this.ga),a.push(this.ma),a):[this.ga,this.ma]};m.o=function(a){a=null!=a?a:B();a.add(this.ga.H());a.add(this.ma.H());return a};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Jg(this.ma,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ga);a=H(a,this.ma);return this.vc(b,a)},this);return new G(b,a.o())};m.toString=function(){return"join_pred("+this.ga.j()+" "+this.F+" "+this.ma.j()+")"};
function Kg(a,b,c){var d;-1!=b.o().indexOf(Ld(a.ga.H()))?(d=b,b=c):d=c;if(d.entries.length>b.entries.length){a:{c=a.ga;a.ga=a.ma;a.ma=c;switch(a.F){case "gt":c="lt";break;case "lt":c="gt";break;case "gte":c="lte";break;case "lte":c="gte";break;default:break a}a.F=c;a.vc=Yd(Xd(),a.ga.I(),a.F)}return[b,d]}return[d,b]}function Lg(a){var b={};a.eb().forEach(function(a){b[a.getName()]=null});return b}
function Mg(a,b,c){null===a.ce&&(a.ce=Lg(a.ma.H()));var d=new Jd(new $b(-1,a.ce),!1);return Nd(b,c,d,[Ld(a.ma.H())])}
function Ng(a,b,c,d){var e=[b,c];d||(e=Kg(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,k=a.ma;d&&(e=c,f=b,h=a.ma,k=a.ga);var p=new Vc,K=[];e.entries.forEach(function(a){var b=String(H(a,h));p.set(b,a)});var ta=e.o(),ca=f.o();f.entries.forEach(function(a){var b=H(a,k),c=String(b);null!==b&&p.has(c)?p.get(c).forEach(function(b){b=Nd(a,ca,b,ta);K.push(b)}):d&&K.push(Mg(this,a,ca))}.bind(a));a=b.o().concat(c.o());return new G(K,a)}
function Og(a,b,c,d,e){function f(a,b){b=new Jd(b,1<ta.length);a=Nd(a,ca,b,ta);K.push(a)}var h=d.dg.H(),k=b,p=c;-1!=b.o().indexOf(Ld(h))&&(k=c,p=b);var K=[],ta=p.o(),ca=k.o();k.entries.forEach(function(a){var b=this.ng(H(a,d.wg)),b=d.index.get(b);0!=b.length&&(d.index.Ma()?f(a,e.get(b[0])):wf(e,b).forEach(f.bind(null,a)))},a);a=k.o().concat(p.o());return new G(K,a)};function Pg(a,b,c){return null===b?new he(a,b,c):n(b.j)?new Jg(a,b,c):new he(a,b,c)};var Qg={};q("lf.schema.DataStoreType",Qg);Qg.INDEXED_DB=0;Qg.MEMORY=1;Qg.LOCAL_STORAGE=2;Qg.FIREBASE=3;Qg.WEB_SQL=4;Qg.OBSERVABLE_STORE=5;function Rg(a,b,c,d){this.nc=a;this.name=b;this.Ec=c;this.f=d}Rg.prototype.j=function(){return this.nc+"."+this.name};function vg(a){return a.f.some(function(a){return a.da.ic()})}function Q(a,b,c,d){this.A=a;this.ta=c;this.K=b;this.sd=d;this.Ka=null}q("lf.schema.Table",Q);Q.prototype.getName=g("A");Q.prototype.getName=Q.prototype.getName;
function Ld(a){return a.Ka||a.A}Q.prototype.sc=function(a){var b=new this.constructor(this.A);b.Ka=a;b.Ig=this.Ig;return b};Q.prototype.as=Q.prototype.sc;Q.prototype.mb=fa;Q.prototype.createRow=Q.prototype.mb;Q.prototype.cb=fa;Q.prototype.deserializeRow=Q.prototype.cb;Q.prototype.Da=g("ta");Q.prototype.getIndices=Q.prototype.Da;Q.prototype.eb=g("K");Q.prototype.getColumns=Q.prototype.eb;Q.prototype.zb=fa;Q.prototype.getConstraint=Q.prototype.zb;Q.prototype.Db=g("sd");Q.prototype.persistentIndex=Q.prototype.Db;
function df(a){return a.A+".#"};function R(a,b){this.child=a;this.Nb=b;this.Ka=null}m=R.prototype;m.getName=function(){return this.Nb+"("+this.child.getName()+")"};m.j=function(){return this.Nb+"("+this.child.j()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.j()};m.I=function(){return this.child.I()};m.Da=function(){return[]};m.Ca=l(null);m.ic=l(!1);m.sc=function(a){this.Ka=a;return this};R.prototype.as=R.prototype.sc;
function Sg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function Tg(a){this.Ka=a||null;this.U=new Q("#UnknownTable",[],[],!1)}m=Tg.prototype;m.getName=l("*");m.j=function(){return this.getName()};m.toString=function(){return this.j()};m.H=g("U");m.I=l(4);m.Da=function(){return[]};m.Ca=l(null);m.ic=l(!1);q("lf.fn.avg",function(a){return new R(a,"AVG")});function Ug(a){return new R(a||new Tg,"COUNT")}q("lf.fn.count",Ug);function Vg(a){return new R(a,"DISTINCT")}q("lf.fn.distinct",Vg);q("lf.fn.max",function(a){return new R(a,"MAX")});q("lf.fn.min",function(a){return new R(a,"MIN")});q("lf.fn.stddev",function(a){return new R(a,"STDDEV")});q("lf.fn.sum",function(a){return new R(a,"SUM")});q("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){I.call(this);this.Uf=b}r(S,I);S.prototype.ba=fa;S.prototype.exec=function(a,b){switch(this.Uf){case 1:return Wg(this,a,b);case 0:return Xg(this,a,b);default:return Yg(this,a,b)}};S.prototype.toString=l("dummy_node");S.prototype.Rc=function(){return this.toString()};function Yg(a,b,c){return new u(function(a){a(this.ba([],b,c))}.bind(a))}function Wg(a,b,c){return ae(a,0).exec(b,c).then(function(a){return this.ba(a,b,c)}.bind(a))}
function Xg(a,b,c){var d=J(a).map(function(a){return a.exec(b,c)});return eb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ba(d,b,c)}.bind(a))};function Zg(a){S.call(this,0,1);this.Ce=a}r(Zg,S);Zg.prototype.toString=function(){return"aggregation("+this.Ce.map(function(a){return a.j()}).toString()+")"};Zg.prototype.ba=function(a){a.forEach(function(a){$g(new ah(a,this.Ce))},this);return a};function ah(a,b){this.Na=a;this.K=b}
function $g(a){a.K.forEach(function(a){a=Sg(a).reverse();for(var b=1;b<a.length;b++){var d=a[b],e=Sg(d).slice(-1)[0],f=d.child instanceof R?Dd(this.Na,d.child):this.Na;if(null!==f.ab&&f.ab.has(d.j()))break;f=bh(d.Nb,f,e);e=this.Na;null===e.ab&&(e.ab=y());e.ab.set(d.j(),f)}},a)}
function bh(a,b,c){var d=null;switch(a){case "MIN":d=ch(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=ch(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=dh(b,c);break;case "COUNT":d=eh(b,c);break;case "SUM":d=fh(b,c);break;case "AVG":a=eh(b,c);0<a&&(d=fh(b,c)/a);break;case "GEOMEAN":d=gh(b,c);break;default:d=hh(b,c)}return d}function ch(a,b,c){return a.entries.reduce(function(a,e){e=H(e,b);return null===e?a:null===a?e:c(a,e)},null)}
function eh(a,b){return b instanceof Tg?a.entries.length:a.entries.reduce(function(a,d){return a+(null===H(d,b)?0:1)},0)}function fh(a,b){return ch(a,b,function(a,b){return b+a})}function hh(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:tb.apply(null,c)}function gh(a,b){var c=0;a=a.entries.reduce(function(a,e){e=H(e,b);if(0==e||null===e)return a;c++;return a+Math.log(e)},0);return 0==c?null:Math.pow(Math.E,a/c)}
function dh(a,b){var c=y();a.entries.forEach(function(a){var d=H(a,b);c.set(d,a)});return new G(z(c),a.o())};function ih(a,b){this.Ha=a;this.aa=b}ih.prototype.fb=g("Ha");ih.prototype.ca=g("aa");function jh(){I.call(this)}r(jh,I);function kh(a,b){I.call(this);this.table=a;this.values=b}r(kh,jh);function lh(a,b){kh.call(this,a,b)}r(lh,kh);function mh(a){I.call(this);this.table=a}r(mh,jh);mh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function nh(a){I.call(this);this.table=a}r(nh,jh);nh.prototype.toString=function(){return"update("+this.table.getName()+")"};
function oh(a){I.call(this);this.O=a}r(oh,jh);oh.prototype.toString=function(){return"select("+this.O.toString()+")"};function ph(a){I.call(this);this.table=a}r(ph,jh);ph.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ka||(a+=" as "+this.table.Ka);return a+")"};function qh(){I.call(this)}r(qh,jh);qh.prototype.toString=l("cross_product");function rh(a,b){I.call(this);this.f=a;this.Pb=b}r(rh,jh);
rh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Pb)var b=this.Pb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function sh(a){I.call(this);this.N=a}r(sh,jh);sh.prototype.toString=function(){return"order_by("+se(this.N)+")"};function th(a){I.call(this);this.f=a}r(th,jh);th.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function uh(a){I.call(this);this.f=a}r(uh,jh);
uh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function vh(a){I.call(this);this.X=a}r(vh,jh);vh.prototype.toString=function(){return"limit("+this.X+")"};function wh(a){I.call(this);this.L=a}r(wh,jh);wh.prototype.toString=function(){return"skip("+this.L+")"};function xh(a,b){I.call(this);this.O=a;this.Rb=b}r(xh,jh);xh.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", "+this.O.toString()+")"};function yh(){}yh.prototype.Za=fa;function zh(){}r(zh,yh);zh.prototype.Za=function(a){this.G=a;this.vb(this.G);return this.G};zh.prototype.vb=function(a){if(a instanceof oh){var b=Ah(this,a.O),b=Bh(this,b);Eg(a,a,b[0],b[1]);a==this.G&&(this.G=b[0]);a=b[0]}J(a).forEach(function(a){this.vb(a)},this)};function Ah(a,b){if(0==J(b).length||"and"!=b.qb)return[b];a=J(b).slice().map(function(a){b.removeChild(a);return Ah(this,a)},a);return Ea(a)}
function Bh(a,b){var c=null,d=null;b.map(function(a,b){a=new oh(a);0==b?c=a:L(d,a);d=a},a);return[c,d]};function Ch(){}r(Ch,yh);Ch.prototype.Za=function(a,b){if(3>b.from.length)return a;this.G=a;this.vb(this.G);return this.G};Ch.prototype.vb=function(a){if(a instanceof qh)for(;2<J(a).length;){for(var b=new qh,c=0;2>c;c++){var d=ce(a,0);L(b,d)}be(a,b,0)}J(a).forEach(function(a){this.vb(a)},this)};function Dh(){S.call(this,0,0)}r(Dh,S);Dh.prototype.toString=l("cross_product");Dh.prototype.ba=function(a){var b=a[0],c=a[1];a=[];for(var d=b.o(),e=c.o(),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Nd(b.entries[f],d,c.entries[h],e);a.push(k)}b=b.o().concat(c.o());return[new G(a,b)]};function Eh(a,b){ve.call(this,a,b);this.Ia=a.b(rc);this.Kb=a.b(sc)}r(Eh,ve);Eh.prototype.getPriority=l(2);Eh.prototype.fe=function(a){0==this.I()?Fh(this,a):this.Nc()};function Fh(a,b){a.ud.forEach(function(a,d){a instanceof re&&ye(this.Kb,a,b[d])},a)}Eh.prototype.Nc=function(){var a=Ae(this.Kb,this.ca());0!=a.length&&(a=new xe(this.global,a),Be(this.Ia,a))};function Gh(a){le.call(this,a)}r(Gh,le);Gh.prototype.ca=function(){var a=B();a.add(this.from);Hh(this,this.from.getName(),a);return a};function Hh(a,b,c){var d=Ih(a.da.info(),b,1);Ih(a.da.info(),b).forEach(c.add.bind(c));d.forEach(function(a){Hh(this,a.getName(),c)},a)}Gh.prototype.clone=function(){var a=new Gh(this.da);pe(a,this);a.from=this.from;return a};Gh.prototype.bind=function(a){Gh.jb.bind.call(this,a);qe(this,a);return this};function Jh(a){le.call(this,a)}r(Jh,le);Jh.prototype.ca=function(){var a=B();a.add(this.La);var b=this.da.info();Kh(this.La.getName(),b.ff).forEach(a.add.bind(a));this.ac&&Ih(b,this.La.getName()).forEach(a.add.bind(a));return a};Jh.prototype.clone=function(){var a=new Jh(this.da);pe(a,this);a.La=this.La;this.values&&(a.values=this.values instanceof Od?this.values:this.values.slice());a.ac=this.ac;a.bc=this.bc;return a};
Jh.prototype.bind=function(a){Jh.jb.bind.call(this,a);this.bc&&(this.values=this.bc instanceof Od?a[this.bc.Ca()]:this.bc.map(function(b){return b instanceof Od?a[b.Ca()]:b}));return this};function Lh(a){le.call(this,a)}r(Lh,le);Lh.prototype.ca=function(){var a=B();a.add(this.table);var b=this.set.map(function(a){return a.J.j()}),c=this.da.info();Mh(c,b).forEach(a.add.bind(a));Nh(c,b).forEach(a.add.bind(a));return a};Lh.prototype.clone=function(){var a=new Lh(this.da);pe(a,this);a.table=this.table;a.set=this.set?Oh(this.set):this.set;return a};Lh.prototype.bind=function(a){Lh.jb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Vc&&(b.value=a[b.Vc])});qe(this,a);return this};
function Oh(a){return a.map(function(a){var b={},d;for(d in a)b[d]=a[d];return b})};function Ph(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+dc(b)+"'";default:return"'"+b.toString()+"'"}}function Qh(a,b){var c=a.ac?"INSERT OR REPLACE":"INSERT",d=a.La.eb(),c=c+(" INTO "+a.La.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var e=d.map(function(c){var d=a.m[c.getName()];return b?null!=d?"#":"NULL":Ph(c.I(),d)});return c+e.join(", ")+");"}).join("\n")}
function Rh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Sh(a,b,c,d){return a instanceof Od?"?"+a.Ca().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Ph(c,a)}).join(", ")+")":"between"==b?Ph(c,a[0])+" AND "+Ph(c,a[1]):Ph(c,a).toString()}
function Th(a,b){return J(a).map(function(a){return"("+Uh(a,b)+")"}).join("and"==a.qb?" AND ":" OR ")}function Vh(a){return[a.ga.j(),Rh(a.F),a.ma.j()].join(" ")}function Uh(a,b){if(a instanceof he){var c=a.J.j(),d=Rh(a.F);a=Sh(a.value,a.F,a.J.I(),b);return"="==d&&"NULL"==a?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==a?[c,"IS NOT NULL"].join(" "):[c,d,a].join(" ")}if(a instanceof Gg)return Th(a,b);if(a instanceof Jg)return Vh(a);throw new D(357,typeof a);}
function Wh(a,b){return(a=Uh(a,b))?" WHERE "+a:""}function Xh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.J.j()+" = ";return-1!=a.Vc?b+"?"+a.Vc.toString():b+Ph(a.J.I(),a.value).toString()}).join(", ");a.w&&(c+=Wh(a.w,b));return c+";"}
function Yh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Ka?a.j()+" AS "+a.Ka:a.j()}).join(", "));c="SELECT "+c+" FROM ";null!=a.hb&&0!=a.hb.size?c+=Zh(a,b):(c+=a.from.map($h).join(", "),a.w&&(c+=Wh(a.w,b)));a.N&&(b=a.N.map(function(a){return a.J.j()+(0==a.order?" DESC":" ASC")}).join(", "),c+=" ORDER BY "+b);a.ra&&(b=a.ra.map(function(a){return a.j()}).join(", "),c+=" GROUP BY "+b);a.X&&(c+=" LIMIT "+a.X.toString());a.L&&(c+=" SKIP "+a.L.toString());return c+";"}
function $h(a){return Ld(a)!=a.getName()?a.getName()+" AS "+Ld(a):a.getName()}function Zh(a,b){for(var c=zg(a.w,function(a){return a instanceof Jg}),d=c.map(Vh),e=$h(a.from[0]),f=1;f<a.from.length;f++)var h=$h(a.from[f]),e=a.hb.has(c[d.length-f].W())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");a=ae(a.w,0);a instanceof Jg||(e+=" WHERE "+Uh(a,b));return e}
function ai(a,b){b=b||!1;a=a.query.clone();if(a instanceof Jh)return Qh(a,b);if(a instanceof Gh){var c="DELETE FROM "+a.from.getName();a.w&&(c+=Wh(a.w,b));return c+";"}if(a instanceof Lh)return Xh(a,b);if(a instanceof re)return Yh(a,b);throw new D(358,typeof a);};function T(a,b){this.global=a;this.Hg=a.b(qc);this.Ia=a.b(rc);this.query=b}q("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.bb()}catch(a){return bb(a)}return new u(function(a,b){var c=new Eh(this.global,[this.Cc()]);Be(this.Ia,c).then(function(b){a(Bd(b[0]))},b)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Wf=function(){var a=function(a){return a.Rc(this.query)+"\n"}.bind(this);return Fg(bi(this).fb(),a)};T.prototype.explain=T.prototype.Wf;
T.prototype.bind=function(a){this.query.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.Pg=function(a){return ai(this,a)};T.prototype.toSql=T.prototype.Pg;T.prototype.bb=aa();function bi(a){if(null==a.gf){var b;b=a.Hg;var c=a.query,d=b.qg.create(c);b=b.Eg.create(d,c);a.gf=b}return a.gf}T.prototype.Cc=function(){return{context:this.query.clone(),ie:bi(this)}};function ci(a){T.call(this,a,new Gh(a.b(tc)))}r(ci,T);q("lf.query.DeleteBuilder",ci);ci.prototype.from=function(a){if(null!=this.query.from)throw new D(515);this.query.from=a;return this};ci.prototype.from=ci.prototype.from;ci.prototype.w=function(a){this.Fd();this.query.w=a;return this};ci.prototype.where=ci.prototype.w;ci.prototype.Fd=function(){if(null==this.query.from)throw new D(548);if(null!=this.query.w)throw new D(516);};
ci.prototype.bb=function(){ci.jb.bb.call(this);if(null==this.query.from)throw new D(517);};function di(a,b){T.call(this,a,new Jh(a.b(tc)));this.query.ac=b||!1}r(di,T);q("lf.query.InsertBuilder",di);di.prototype.bb=function(){di.jb.bb.call(this);var a=this.query;if(null==a.La||null==a.values)throw new D(518);if(a.ac&&null===a.La.zb().td)throw new D(519);};di.prototype.La=function(a){if(null!=this.query.La)throw new D(520);this.query.La=a;return this};di.prototype.into=di.prototype.La;
di.prototype.values=function(a){if(null!=this.query.values)throw new D(521);a instanceof Od||a.some(function(a){return a instanceof Od})?this.query.bc=a:this.query.values=a;return this};di.prototype.values=di.prototype.values;function ei(a){return fi("and",Array.prototype.slice.call(arguments))}q("lf.op.and",ei);q("lf.op.or",function(a){return fi("or",Array.prototype.slice.call(arguments))});function fi(a,b){var c=new Gg(a);b.forEach(function(a){L(c,a)});return c}q("lf.op.not",function(a){a.Pc(!0);return a});function U(a,b){T.call(this,a,new re(a.b(tc)));this.Me=this.Ad=!1;this.query.f=b;gi(this);hi(this)}r(U,T);q("lf.query.SelectBuilder",U);U.prototype.bb=function(){U.jb.bb.call(this);var a=this.query;if(null==a.from)throw new D(522);if(n(a.Sb)&&!n(a.X)||n(a.Zb)&&!n(a.L))throw new D(523);null!=this.query.ra?ii(this):ji(this)};function gi(a){var b=a.query.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Nb},a);if(0!=b.length&&(1!=b.length||1!=a.query.f.length))throw new D(524);}
function ii(a){if(a.query.ra.some(function(a){a=a.I();return 6==a||0==a}))throw new D(525);}function ji(a){var b=a.query.f.some(function(a){return a instanceof R},a);a=a.query.f.some(function(a){return!(a instanceof R)},a)||0==a.query.f.length;if(b&&a)throw new D(526);}function hi(a){a.query.f.forEach(function(a){if(a instanceof R&&!ki(a.Nb,a.I()))throw new D(527,a.j());},a)}function li(a,b){if(null==a.query.from)throw new D(b);}
U.prototype.from=function(a){if(this.Me)throw new D(515);this.Me=!0;null==this.query.from&&(this.query.from=[]);this.query.from.push.apply(this.query.from,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.from;U.prototype.w=function(a){li(this,548);if(this.Ad)throw new D(516);this.Ad=!0;mi(this,a);return this};U.prototype.where=U.prototype.w;function mi(a,b){null!=a.query.w&&(b=ei(b,a.query.w));a.query.w=b}
U.prototype.hg=function(a,b){li(this,542);if(this.Ad)throw new D(547);this.query.from.push(a);mi(this,b);return this};U.prototype.innerJoin=U.prototype.hg;U.prototype.og=function(a,b){li(this,542);if(!(b instanceof Jg))throw new D(541);if(this.Ad)throw new D(547);this.query.from.push(a);null==this.query.hb&&(this.query.hb=B());var c=b;Ld(a)!=Ld(b.ma.H())&&(c=b.reverse());this.query.hb.add(c.W());mi(this,c);return this};U.prototype.leftOuterJoin=U.prototype.og;
U.prototype.X=function(a){if(null!=(this.query.X||this.query.Sb))throw new D(528);if(a instanceof Od)this.query.Sb=a;else{if(0>a)throw new D(531);this.query.X=a}return this};U.prototype.limit=U.prototype.X;U.prototype.L=function(a){if(null!=(this.query.L||this.query.Zb))throw new D(529);if(a instanceof Od)this.query.Zb=a;else{if(0>a)throw new D(531);this.query.L=a}return this};U.prototype.skip=U.prototype.L;
U.prototype.N=function(a,b){li(this,549);null==this.query.N&&(this.query.N=[]);this.query.N.push({J:a,order:null!=b?b:1});return this};U.prototype.orderBy=U.prototype.N;U.prototype.ra=function(a){li(this,549);if(null!=this.query.ra)throw new D(530);null==this.query.ra&&(this.query.ra=[]);this.query.ra.push.apply(this.query.ra,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.ra;
function ki(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}U.prototype.clone=function(){var a=new U(this.global,this.query.f);a.query=this.query.clone();a.query.Yc=null;return a};U.prototype.clone=U.prototype.clone;function ni(a,b){T.call(this,a,new Lh(a.b(tc)));this.query.table=b}r(ni,T);q("lf.query.UpdateBuilder",ni);ni.prototype.set=function(a,b){a={Vc:b instanceof Od?b.Ca():-1,J:a,value:b};null!=this.query.set?this.query.set.push(a):this.query.set=[a];return this};ni.prototype.set=ni.prototype.set;ni.prototype.w=function(a){this.Fd();this.query.w=a;return this};ni.prototype.where=ni.prototype.w;ni.prototype.Fd=function(){if(null!=this.query.w)throw new D(516);};
ni.prototype.bb=function(){ni.jb.bb.call(this);if(null==this.query.set)throw new D(532);if(this.query.set.some(function(a){return a.value instanceof Od}))throw new D(501);};function oi(a){this.query=a;this.Ha=null}oi.prototype.hc=function(){null===this.Ha&&(this.Ha=this.zc());return this.Ha};oi.prototype.zc=fa;function pi(a){oi.call(this,a)}r(pi,oi);pi.prototype.zc=function(){return this.query.ac?new lh(this.query.La,this.query.values):new kh(this.query.La,this.query.values)};function qi(a){oi.call(this,a)}r(qi,oi);
qi.prototype.zc=function(){var a=new nh(this.query.table),b=null!=this.query.w?new oh(this.query.w.Fb()):null,c=new ph(this.query.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function ri(a,b,c){this.Ha=a;this.ke=b;this.Vb=c}ri.prototype.hc=function(){this.Vb.forEach(function(a){this.Ha=a.Za(this.Ha,this.ke)},this);return this.Ha};function si(a,b){oi.call(this,a);this.Vb=b}r(si,oi);si.prototype.zc=function(){var a=new mh(this.query.from),b=null!=this.query.w?new oh(this.query.w.Fb()):null,c=new ph(this.query.from);null===b?L(a,c):(L(b,c),L(a,b));return(new ri(a,this.query,this.Vb)).hc()};function ti(){}r(ti,yh);ti.prototype.Za=function(a,b){if(2>b.from.length)return a;this.G=a;this.vb(this.G,b);return this.G};ti.prototype.vb=function(a,b){if(a instanceof oh&&a.O instanceof Jg){var c=a.O.W(),d=ae(a,0);d instanceof qh&&(c=null!=b.hb&&b.hb.has(c),c=new xh(a.O,c),Eg(a,d,c,c),a==this.G&&(this.G=c),a=c)}J(a).forEach(function(a){this.vb(a,b)},this)};function ui(){this.Uc=B()}r(ui,yh);ui.prototype.Za=function(a,b){if(!n(b.w))return a;this.Uc.clear();this.G=a;this.vb(this.G,b);this.Uc.clear();return this.G};ui.prototype.vb=function(a,b){var c=function(a){J(a).forEach(d)}.bind(this),d=function(a){if(!this.Uc.has(a)){if(a instanceof oh){var e=a.O.o(),h=function(a){return vi(this,a,e)}.bind(this),h=wi(this,b,a,h);this.Uc.add(a);h!=a&&(null===h.getParent()&&(this.G=h),d(h))}c(a)}}.bind(this);d(a)};
function wi(a,b,c,d){var e=c;if(xi(b,c))e=Cg(c),wi(a,b,c,d);else if(yi(c)){var f=[],e=Dg(c,d,function(a){a=new oh(a.O);f.push(a);return a});f.forEach(function(a){wi(this,b,a,d)},a)}return e}function vi(a,b,c){var d=B();yg(b).forEach(function(a){d.add(a.table)},a);b instanceof ph&&d.add(b.table);return zc(d,c)}function yi(a){a=ae(a,0);return a instanceof qh||a instanceof xh}
function xi(a,b){var c=ae(b,0);if(!(c instanceof oh))return!1;if(null==a.hb)return!0;b=b.O instanceof Jg;a=a.hb.has(c.O.W());return b||!a};function zi(a,b){oi.call(this,a);this.Vb=b;this.jf=this.bf=this.sf=this.ef=this.De=this.Re=this.rf=this.Je=this.uf=null}r(zi,oi);
zi.prototype.zc=function(){Ai(this);2<=this.query.from.length&&(this.Je=new qh);this.rf=null!=this.query.w?new oh(this.query.w.Fb()):null;this.query.N&&(this.ef=new sh(this.query.N));null!=this.query.L&&0<this.query.L&&(this.sf=new wh(this.query.L));null!=this.query.X&&(this.bf=new vh(this.query.X));null!=this.query.ra&&(this.Re=new uh(this.query.ra));Bi(this);this.jf=new rh(this.query.f||[],this.query.ra||null);var a=Ci(this);return(new ri(a,this.query,this.Vb)).hc()};
function Ci(a){for(var b=[a.bf,a.sf,a.jf,a.ef,a.De,a.Re,a.rf,a.Je],c=-1,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.uf.forEach(function(a){L(b[c],a)});return d}function Ai(a){a.uf=a.query.from.map(function(a){return new ph(a)},a)}function Bi(a){var b=a.query.f.filter(function(a){return a instanceof R});null!=a.query.N&&a.query.N.forEach(function(a){a.J instanceof R&&b.push(a.J)});0<b.length&&(a.De=new th(b))};function Di(){this.re=[new zh,new Ch,new ui,new ti];this.Pd=[new zh]}Di.prototype.create=function(a){var b;if(a instanceof Jh)b=new pi(a);else if(a instanceof Gh)b=new si(a,this.Pd);else if(a instanceof re)b=new zi(a,this.re);else if(a instanceof Lh)b=new qi(a);else throw new D(513);b=b.hc();return new ih(b,a.ca())};function Ei(a){S.call(this,0,1);this.U=a}r(Ei,S);Ei.prototype.toString=function(){return"delete("+this.U.getName()+")"};Ei.prototype.ba=function(a,b){a=a[0].entries.map(function(a){return a.va});b.remove(this.U,a);return[Fd()]};function Fi(a,b){S.call(this,0,-1);this.table=b;this.C=a.b(pc)}r(Fi,S);Fi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Fi.prototype.ba=function(){var a=this.C.get(df(this.table)),b=new G([],[this.table.getName()]),c=Ug(),a=a.Y().ia;null===b.ab&&(b.ab=y());b.ab.set(c.j(),a);return[b]};function Gi(a,b){S.call(this,0,-1);this.V=a.b(oc);this.C=a.b(pc);this.table=b}r(Gi,S);Gi.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ka||(a+=" as "+this.table.Ka);return a+")"};Gi.prototype.ba=function(){var a=this.C.get(df(this.table)).Va();return[Id(wf(this.V,a),[Ld(this.table)])]};function Hi(a){this.c=a}r(Hi,yh);Hi.prototype.Za=function(a,b){this.G=a;if(!this.Hd(b))return a;a=zg(a,function(a){return a instanceof Gi})[0];b=new Fi(this.c,a.table);Eg(a,a,b,b);return this.G};Hi.prototype.Hd=function(a){return 1==a.f.length&&1==a.from.length&&null==a.w&&null==a.X&&null==a.L&&null==a.ra?(a=a.f[0],a instanceof R&&"COUNT"==a.Nb&&a.child instanceof Tg):!1};function Ii(a){S.call(this,0,1);this.Qe=a}r(Ii,S);Ii.prototype.toString=function(){return"groupBy("+this.Qe.map(function(a){return a.j()}).toString()+")"};Ii.prototype.ba=function(a){return Ji(this,a[0])};function Ji(a,b){var c=new Vc,d=function(a){return this.Qe.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),b.o())},a)};function Ki(a,b,c){S.call(this,0,0);this.C=a.b(pc);this.V=a.b(oc);this.O=b;this.Rb=c;this.Dd="eq"==this.O.F?0:2;this.Te=null}r(Ki,S);var Li=["hash","index_nested_loop","nested_loop"];Ki.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", impl: "+Li[this.Dd]+", "+this.O.toString()+")"};
Ki.prototype.ba=function(a){switch(this.Dd){case 0:return[Ng(this.O,a[0],a[1],this.Rb)];case 1:return[Og(this.O,a[0],a[1],this.Te,this.V)];default:var b=this.O,c=a[0];a=a[1];var d=this.Rb,e=[c,a];d||(e=Kg(b,c,a));c=e[0];a=e[1];for(var e=[],f=c.o(),h=a.o(),k=c.entries.length,p=a.entries.length,K=p+256-1>>8,ta=0;ta<K;){for(var ca=0;ca<k;ca++){var Db=!1,cg=H(c.entries[ca],b.ga);if(null!==cg)for(var Oi=Math.min(ta+1<<8,p),Eb=ta<<8;Eb<Oi;Eb++)if(b.vc(cg,H(a.entries[Eb],b.ma))){var Db=!0,Uc=Nd(c.entries[ca],
f,a.entries[Eb],h);e.push(Uc)}d&&!Db&&e.push(Mg(b,c.entries[ca],f))}ta++}b=c.o().concat(a.o());return[new G(e,b)]}};function Mi(a,b){a.Dd=1;var c=a.C.get(b.Ca().j());a.Te={dg:b,wg:b==a.O.ga?a.O.ma:a.O.ga,index:c}};function Ni(a){S.call(this,0,-1);this.kf=a}r(Ni,S);Ni.prototype.toString=function(){return"no_op_step("+this.kf[0].o().join(",")+")"};Ni.prototype.ba=g("kf");function Pi(){}r(Pi,yh);Pi.prototype.Za=function(a,b){this.G=a;if(!this.Hd(b))return a;zg(a,function(a){return a instanceof Ki}).forEach(this.Gg,this);return this.G};Pi.prototype.Hd=function(a){return 1<a.from.length};
Pi.prototype.Gg=function(a){if("eq"==a.O.F&&!a.Rb){var b=function(b){if(!(b instanceof Gi))return null;b=Ld(b.table)==Ld(a.O.ma.H())?a.O.ma:a.O.ga;return null===b.Ca()?null:b},c=b(ae(a,0)),b=b(ae(a,1));if(null!==c||null!==b){b=null===b?c:b;Mi(a,b);var d=new G([],[Ld(b.H())]);de(a,new Ni([d]),b==c?0:1)}}};function Qi(a){a=a.map(function(a){return a.qa()});a=yb.apply(null,a);var b=[];xb(a,function(a){b.push(a)});return b}function Ri(a){this.Qb=a}Ri.prototype.cd=function(){return 1==this.Qb.f.length?[vd()]:[this.Qb.f.map(function(){return vd()})]};function Si(a,b){this.Qb=a;this.Ga=b;this.Ld=this.$e=null}
function Ti(a,b){var c=y();a.Ga.keys().forEach(function(a){var d=this.Ga.get(a).map(function(a){return me(b,a)},this),f=new zd([vd()]);d.forEach(function(a){f=Ad(f,a.we())});c.set(a,f)},a);return c}Si.prototype.cd=function(a){if(this.$e==a)return this.Ld;for(var b=Ti(this,a),c=this.Qb.f.length-1;0<=c;c--){var d=this.Qb.f[c];if(null!==(b.get(d.da.getName())||null))break;b.set(d.da.getName(),new zd([vd()]))}this.Ld=1==this.Qb.f.length?z(b)[0].qa():Qi(Ui(this,b));this.$e=a;return this.Ld};
function Ui(a,b){var c=y(),d=0;a.Qb.f.forEach(function(a){c.set(a.da.getName(),d);d++});return Zb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Vi(a,b){this.xd=b;this.C=a.b(pc)}function Wi(a){a=a.C.get(df(a.xd));return Math.floor(.02*a.Y().ia)}function Xi(a,b,c){c=c.filter(a.kg,a);if(0==c.length)return null;a=Yi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var e=Zi(c,b);return e<d?(d=e,c):a},null)}
function Yi(a,b){return a.xd.Da().map(function(a){a=new $i(this.C,a);aj(a,b);return a},a).filter(function(a){if(null===a.Ga)a=!1;else{for(var b=!1,c=!0,f=0;f<a.gb.f.length;f++){var h=a.Ga.has(a.gb.f[f].da.getName());if(b&&h){c=!1;break}h||(b=!0)}a=c}return a})}Vi.prototype.kg=function(a){return a instanceof he?!a.md()||a.J.H()!=this.xd||"in"==a.F&&a.value.length>Wi(this)?!1:!0:a instanceof Gg?a.md()&&ae(a,0).J.H()==this.xd?J(a).length<=Wi(this):!1:!1};
function $i(a,b){this.C=a;this.gb=b;this.eg=B(this.gb.f.map(function(a){return a.da.getName()}));this.$d=this.Ga=null}function bj(a){null===a.$d&&(a.$d=new Si(a.gb,a.Ga));return a.$d}function aj(a,b){b.forEach(function(a){var b=a.eb()[0].getName();this.eg.has(b)&&(null===this.Ga&&(this.Ga=new Vc),this.Ga.set(b,a.W()))},a)}function Zi(a,b){b=bj(a).cd(b);var c=a.C.get(a.gb.j());return b.reduce(function(a,b){return a+c.ad(b)},0)};function cj(a,b,c,d){S.call(this,0,-1);this.C=a.b(pc);this.index=b;this.Ze=c;this.oe=d;this.Tc=this.Sc=!1}r(cj,S);cj.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.oe?"reverse":"natural")+(this.Sc?", limit:?":"")+(this.Tc?", skip:?":"")+")"};cj.prototype.Rc=function(a){var b=this.toString(),c=this.Ze.cd(a),b=b.replace("?",c.toString());this.Sc&&(b=b.replace("?",a.X.toString()));this.Tc&&(b=b.replace("?",a.L.toString()));return b};
cj.prototype.ba=function(a,b,c){a=this.Ze.cd(c);b=this.C.get(this.index.j());c=(1==a.length&&a[0]instanceof E&&wd(a[0])?Af(b.get(a[0].from),!1,this.Sc?c.X:void 0,this.Tc?c.L:void 0):b.Va(a,this.oe,this.Sc?c.X:void 0,this.Tc?c.L:void 0)).map(function(a){return new $b(a,{})},this);return[Id(c,[this.index.nc])]};function dj(){S.call(this,0,0)}r(dj,S);dj.prototype.toString=l("multi_index_range_scan()");
dj.prototype.ba=function(a){var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.va.id(),a)})});var c=z(b);return[new G(c,a[0].o())]};function ej(a){S.call(this,0,1);this.kc=a}r(ej,S);ej.prototype.toString=l("select(?)");ej.prototype.Rc=function(a){a=me(a,this.kc);return this.toString().replace("?",a.toString())};ej.prototype.ba=function(a,b,c){return[me(c,this.kc).eval(a[0])]};function fj(a,b){S.call(this,0,1);this.V=a.b(oc);this.U=b}r(fj,S);fj.prototype.toString=function(){return"table_access_by_row_id("+this.U.getName()+")"};fj.prototype.ba=function(a){return[Id(wf(this.V,Cd(a[0])),[Ld(this.U)])]};function gj(a){this.c=a}r(gj,yh);gj.prototype.Za=function(a,b){this.G=a;zg(a,function(a){return a instanceof Gi}).forEach(function(a){var c=hj(a);if(0!=c.length){var e=Xi(new Vi(this.c,a.table),b,c.map(function(a){return me(b,a.kc)}));if(null!==e){var f=y();c.forEach(function(a){f.set(a.kc,a)},this);this.G=ij(this,e,f,a)}}},this);return this.G};function hj(a){var b=[];for(a=a.getParent();a;){if(a instanceof ej)b.push(a);else if(a instanceof Ki)break;a=a.getParent()}return b}
function ij(a,b,c,d){(null===b.Ga?[]:b.Ga.values()).map(function(a){return c.get(a)}).forEach(Ag);b=new cj(a.c,b.gb,bj(b),!1);a=new fj(a.c,d.table);L(a,b);Eg(d,d,a,b);return b.fb()};function jj(a,b){S.call(this,0,-1);this.C=a.b(pc);this.U=b}r(jj,S);jj.prototype.toString=function(){return"insert("+this.U.getName()+")"};jj.prototype.ba=function(a,b,c){kj(this.U,c.values,this.C);b.Bb(this.U,c.values);return[Id(c.values,[this.U.getName()])]};function kj(a,b,c){a=a.zb().td;if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].da.getName();c=c.get(a.j()).Y().Gc;var e=null===c?0:c;b.forEach(function(a){if(0==a.m[d]||null==a.m[d])e++,a.m[d]=e})}}
function lj(a,b){S.call(this,0,-1);this.C=a.b(pc);this.U=b}r(lj,S);lj.prototype.toString=function(){return"insert_replace("+this.U.getName()+")"};lj.prototype.ba=function(a,b,c){kj(this.U,c.values,this.C);b.Wd(this.U,c.values);return[Id(c.values,[this.U.getName()])]};function mj(){S.call(this,0,1)}r(mj,S);mj.prototype.toString=l("limit(?)");mj.prototype.Rc=function(a){return this.toString().replace("?",a.X.toString())};mj.prototype.ba=function(a,b,c){a[0].entries.splice(c.X);return a};function nj(a){S.call(this,0,1);this.N=a}r(nj,S);m=nj.prototype;m.toString=function(){return"order_by("+se(this.N)+")"};m.ba=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.N.length;d++){var e=Vg(this.N[d].J);if(null!==b.ab&&b.ab.has(e.j())){c=e;break}}b=c;(null===b?a[0]:Dd(a[0],b)).entries.sort(this.Tf.bind(this))}else a.sort(this.Jg.bind(this));return a};
m.$=function(a,b){var c,d,e,f=-1;do f++,e=this.N[f].J,c=this.N[f].order,d=a(e),e=b(e);while(d==e&&f+1<this.N.length);a=d<e?-1:d>e?1:0;return 1==c?a:-a};m.Jg=function(a,b){return this.$(function(b){return b instanceof R?Dd(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?Dd(b,a):H(b.entries[b.entries.length-1],a)})};m.Tf=function(a,b){return this.$(function(b){return H(a,b)},function(a){return H(b,a)})};function oj(a,b){this.Na=a;this.K=b}function pj(a){return a.K.some(function(a){return a instanceof R},a)?qj(a):rj(a)}function qj(a){if(1==a.K.length&&"DISTINCT"==a.K[0].Nb)return a=Dd(a.Na,a.K[0]).entries.map(function(a){var b=new Jd(new $b(-1,{}),1<this.Na.M.size);Md(b,this.K[0],H(a,this.K[0].child));return b},a),new G(a,[]);var b=new Jd(new $b(-1,{}),1<a.Na.M.size);a.K.forEach(function(a){var c=a instanceof R?Dd(this.Na,a):H(this.Na.entries[0],a);Md(b,a,c)},a);return new G([b],a.Na.o())}
function rj(a){var b=Array(a.Na.entries.length),c=1<a.Na.M.size;a.Na.entries.forEach(function(a,e){b[e]=new Jd(new $b(a.va.id(),{}),c);this.K.forEach(function(c){Md(b[e],c,H(a,c))},this)},a);return new G(b,a.Na.o())}function sj(a,b){var c=a.map(function(a){return pj(new oj(a,b)).entries[0]});return new G(c,a[0].o())};function tj(a,b){S.call(this,0,1);this.f=a;this.Pb=b}r(tj,S);tj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Pb)var b=this.Pb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};tj.prototype.ba=function(a){0==a.length?a=[Fd()]:1==a.length?(a=a[0],a=[0==this.f.length?a:pj(new oj(a,this.f))]):a=[sj(a,this.f)];return a};function uj(a){return a.f.some(function(a){return a instanceof R})||null!==a.Pb};function vj(){S.call(this,0,1)}r(vj,S);vj.prototype.toString=l("skip(?)");vj.prototype.Rc=function(a){return this.toString().replace("?",a.L.toString())};vj.prototype.ba=function(a,b,c){return[new G(a[0].entries.slice(c.L),a[0].o())]};function wj(){}r(wj,yh);wj.prototype.Za=function(a,b){if(!n(b.X)&&!n(b.L))return a;var c=xj(a);if(null===c)return a;zg(a,function(a){return a instanceof mj||a instanceof vj}).forEach(function(a){a instanceof mj?c.Sc=!0:c.Tc=!0;Ag(a)},this);return c.fb()};function xj(a){a=zg(a,function(a){return a instanceof cj},function(a){return a instanceof tj&&uj(a)||a instanceof nj||1!=J(a).length||a instanceof ej});return 0<a.length?a[0]:null};function yj(a){this.c=a}r(yj,yh);yj.prototype.Za=function(a,b){this.G=a;var c=zj(this,b);if(0==c.length)return this.G;var d,e=0;do d=c[e++],a=Aj(this,d,b);while(null===a&&e<c.length);if(null===a)return this.G;b=Bj(this,a[0].gb.nc);return null===b?this.G:this.G=Cj(this,d,b,a)};function zj(a,b){return zg(a.G,function(a){if(!(a instanceof ej))return!1;a=me(b,a.kc);return a instanceof Gg&&"or"==a.qb})}function Bj(a,b){return zg(a.G,function(a){return a instanceof Gi&&a.table.getName()==b})[0]||null}
function Aj(a,b,c){b=me(c,b.kc);var d=b.o();if(1!=d.size)return null;var d=C(d)[0],e=new Vi(a.c,d),f=null;return J(b).every(function(a){a=Xi(e,c,[a]);null===a||(null===f?f=[a]:f.push(a));return null!==a})?f:null}function Cj(a,b,c,d){var e=new fj(a.c,c.table),f=new dj;L(e,f);d.forEach(function(a){a=new cj(this.c,a.gb,bj(a),!1);L(f,a)},a);Ag(b);Eg(c,c,e,f);return f.fb()};function Dj(a){this.c=a}r(Dj,yh);Dj.prototype.Za=function(a,b){b=Ej(a,b);if(null===b)return a;a:{var c=b;a=Fj(ae(b,0));if(null!==a){var d;d=b.N;for(var e=null,f=a.table.Da(),h=0;h<f.length&&null===e;h++)e=Gj(f[h],d);d=e;if(null===d){a=c;break a}c=new cj(this.c,d.gb,new Ri(d.gb),d.We);d=new fj(this.c,a.table);L(d,c);Ag(b);c=Eg(a,a,d,c)}a=c}a==b&&(a=b,c=Hj(ae(b,0)),null!==c&&(d=Gj(c.index,b.N),null!==d&&(c.oe=d.We,a=Ag(b).parent)));return a.fb()};
function Hj(a){a=zg(a,function(a){return a instanceof cj},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function Fj(a){a=zg(a,function(a){return a instanceof Gi},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function Ej(a,b){return n(b.N)?zg(a,function(a){return a instanceof nj})[0]:null}function Gj(a,b){if(a.f.length!=b.length||!b.every(function(b,d){return b.J.getName()==a.f[d].da.getName()}))return null;b=Ij(b,a);return b[0]||b[1]?{gb:a,We:b[1]}:null}
function Ij(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function Jj(a,b,c){this.Ha=a;this.ke=b;this.Vb=c}Jj.prototype.hc=function(){this.Vb.forEach(function(a){this.Ha=a.Za(this.Ha,this.ke)},this);return this.Ha};function Kj(a){S.call(this,0,1);this.U=a}r(Kj,S);Kj.prototype.toString=function(){return"update("+this.U.getName()+")"};Kj.prototype.ba=function(a,b,c){a=a[0].entries.map(function(a){var b=this.U.cb(a.va.Ja());c.set.forEach(function(a){b.m[a.J.getName()]=a.value},this);return b},this);b.update(this.U,a);return[Fd()]};function Lj(a){this.c=a;this.re=[new Pi,new gj(this.c),new yj(this.c),new Dj(this.c),new wj,new Hi(this.c)];this.Pd=[new gj(this.c)]}Lj.prototype.create=function(a,b){var c=a.fb();if(c instanceof lh||c instanceof kh)return Mj(this,a,b);if(c instanceof rh||c instanceof vh||c instanceof wh)return Mj(this,a,b,this.re);if(c instanceof mh||c instanceof nh)return Mj(this,a,b,this.Pd);throw new D(8);};
function Mj(a,b,c,d){a=xg(b.fb(),a.tg.bind(a));null!=d&&(a=(new Jj(a,c,d)).hc());return new te(a,b.ca())}
Lj.prototype.tg=function(a){if(a instanceof rh)return new tj(a.f,a.Pb);if(a instanceof uh)return new Ii(a.f);if(a instanceof th)return new Zg(a.f);if(a instanceof sh)return new nj(a.N);if(a instanceof wh)return new vj;if(a instanceof vh)return new mj;if(a instanceof oh)return new ej(a.O.W());if(a instanceof qh)return new Dh;if(a instanceof xh)return new Ki(this.c,a.O,a.Rb);if(a instanceof ph)return new Gi(this.c,a.table);if(a instanceof mh)return new Ei(a.table);if(a instanceof nh)return new Kj(a.table);
if(a instanceof lh)return new lj(this.c,a.table);if(a instanceof kh)return new jj(this.c,a.table);throw new D(514);};function Nj(a){this.qg=new Di;this.Eg=new Lj(a)};function Oj(){this.cf=y()}function Pj(a,b){var c=a.cf.get(b.getName())||null;null===c&&(c=new Qj,a.cf.set(b.getName(),c));return c}function Rj(a,b,c,d){c.forEach(function(a){a=Pj(this,a);0==d?(a.ib=null,a.wc=b):3==d?(null===a.Yb&&(a.Yb=B()),a.Yb.add(b),null===a.Ya&&(a.Ya=B()),a.Ya.delete(b)):1==d?(null===a.Ya&&(a.Ya=B()),a.Ya.add(b)):2==d&&(a.ib=b)},a)}
function Sj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Pj(this,a);var c=null===a.Ya||0==a.Ya.size;e=0==d?(null===a.Yb||0==a.Yb.size)&&c&&null===a.wc&&null!==a.ib&&a.ib==b:3==d?null===a.wc&&null===a.ib&&null!==a.Ya&&a.Ya.has(b):1==d?null===a.ib:c&&(null===a.ib||a.ib==b)}},a);return e}function Tj(a,b,c,d){var e=Sj(a,b,c,d);e&&Rj(a,b,c,d);return e}Oj.prototype.releaseLock=function(a,b){b.forEach(function(b){Pj(this,b).releaseLock(a)},this)};
function Uj(a,b){b.forEach(function(a){Pj(this,a).ib=null},a)}function Qj(){this.Yb=this.Ya=this.ib=this.wc=null}Qj.prototype.releaseLock=function(a){this.wc==a&&(this.wc=null);this.ib==a&&(this.ib=null);null===this.Ya||this.Ya.delete(a);null===this.Yb||this.Yb.delete(a)};function Vj(){this.Ub=new Wj;this.Fc=new Oj}function Be(a,b){(2>b.getPriority()||2>b.getPriority())&&Uj(a.Fc,b.ca());a.Ub.Bb(b);Xj(a);return b.Eb.ha}function Xj(a){for(var b=a.Ub.qa(),c=0;c<b.length;c++){var d=b[c];if(0==d.I()?Yj(a,d,1,3):Yj(a,d,2,0)){a.Ub.remove(d);var e=a;d.exec().then(e.Bg.bind(e,d),e.Ag.bind(e,d))}}}function Yj(a,b,c,d){var e=!1;Tj(a.Fc,b.W(),b.ca(),c)&&(e=Tj(a.Fc,b.W(),b.ca(),d));return e}Vj.prototype.Bg=function(a,b){this.Fc.releaseLock(a.W(),a.ca());a.Eb.resolve(b);Xj(this)};
Vj.prototype.Ag=function(a,b){this.Fc.releaseLock(a.W(),a.ca());a.Eb.reject(b);Xj(this)};function Wj(){this.Ub=[]}Wj.prototype.Bb=function(a){zf(this.Ub,a,function(a,c){var b=a.getPriority()-c.getPriority();return 0==b?a.W()-c.W():b})};Wj.prototype.qa=function(){return this.Ub.slice()};Wj.prototype.remove=function(a){var b=this.Ub;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Zj(){this.Oc=y()}var ak;function bk(){ak||(ak=new Zj);return ak}Zj.prototype.clear=function(){this.Oc.clear()};Zj.prototype.clear=Zj.prototype.clear;Zj.prototype.sb=function(a,b){this.Oc.set(a.toString(),b);return b};Zj.prototype.registerService=Zj.prototype.sb;Zj.prototype.b=function(a){var b=this.Oc.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};Zj.prototype.getService=Zj.prototype.b;Zj.prototype.nd=function(a){return this.Oc.has(a.toString())};
Zj.prototype.isRegistered=Zj.prototype.nd;function ck(){var a=bk();return Zb(a.Oc)};function dk(a,b,c,d){return null!=a?null!=b?ek(a,b,c,d):fk(a):gk()}function hk(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function ik(a){var b=bk();a=new mc("ns_"+a);return b.nd(a)?b.b(a):null}function gk(){var a={};ck().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=ik(b).b(tc).version())});return hk(a)}function fk(a){a=ik(a);var b={};if(null!=a){var c=a.b(pc);a.b(tc).oa().forEach(function(a){b[a.getName()]=c.get(df(a)).Y().ia})}return hk(b)}
function ek(a,b,c,d){var e=ik(a);a=[];if(null!=e){var f=null;try{f=e.b(tc).table(b)}catch(h){}null!=f&&(b=e.b(pc),e=e.b(oc),c=b.get(df(f)).Va(void 0,!1,c,d),c.length&&(a=wf(e,c).map(function(a){return a.m})))}return hk(a)};function jk(a,b){this.Qd=Xd();this.le=a;this.pd=b;this.K=kk(this)}function kk(a){if(0<a.le.f.length)return a.le.f;var b=[];a.le.from.forEach(function(a){a.eb().forEach(function(a){b.push(a)})});return b}jk.prototype.$=function(a,b){return this.K.every(function(c){return Yd(this.Qd,c.I(),"eq")(H(a,c),H(b,c))},this)};
function lk(a,b,c){var d=null===b?[]:b.entries,e=pb(d,c.entries,a.$.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.pd.splice(f,1),k=mk(h,k,0,a.pd),b.push(k))}e=pb(d,c.entries,a.$.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.pd.splice(h,0,k.va.m),k=mk(h,[],1,a.pd),b.push(k));return b}function mk(a,b,c,d){return{addedCount:c,index:a,object:d,removed:b,type:"splice"}};function nk(){this.gc=y()}nk.prototype.Cd=function(a,b){var c=la(a.query).toString(),d=this.gc.get(c)||null;null===d&&(d=new ok(a),this.gc.set(c,d));d.Cd(b)};nk.prototype.me=function(a,b){a=la(a.query).toString();var c=this.gc.get(a)||null;c.me(b);0<c.Ic.size||this.gc.delete(a)};function Ae(a,b){var c=B();b.forEach(function(a){c.add(a.getName())});var d=[];a.gc.forEach(function(a){a=a.Cc();a.context.from.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function ye(a,b,c){b=la(null!=b.Yc?b.Yc:b).toString();a=a.gc.get(b)||null;null!==a&&pk(a,c)}function ok(a){this.Gf=a;this.Ic=B();this.yg=[];this.af=null;this.Rf=new jk(a.query,this.yg)}ok.prototype.Cd=function(a){this.Ic.has(a)||this.Ic.add(a)};ok.prototype.me=function(a){return this.Ic.delete(a)};ok.prototype.Cc=function(){var a=this.Gf;return{context:a.query,ie:bi(a)}};function pk(a,b){var c=lk(a.Rf,a.af,b);a.af=b;0<c.length&&a.Ic.forEach(function(a){a(c)})};function qk(a,b){var c=a.b(tc),d=b||{};b=new vf(c);a.sb(oc,b);b=null;var e=!1;null!=d.storeType?b=d.storeType:(b=Xb(),b=b.fg?0:b.Ug?4:1);switch(b){case 0:b=new $e(a,c);break;case 1:b=new gf(c);break;case 5:b=new jf(c);break;case 4:b=new sf(a,c,d.webSqlDbSize);break;case 3:b=new Ne(c,d.firebase);e=!0;break;default:throw new D(300);}a.sb(nc,b);var f=new wg;a.sb(pc,f);return b.Ea(d.onUpgrade).then(function(){var b=new Nj(a);a.sb(qc,b);b=new Vj;a.sb(rc,b);b=new nk;a.sb(sc,b);return f.Ea(c)}).then(function(){if(e){var b=
new Ce(a);b.Oa.subscribe(b.de.bind(b))}d.enableInspector&&(window.top["#lfInspect"]=dk);return(new pg(a)).Ea(c)})};function rk(a){this.c=a;this.g=a.b(tc);this.aa=B(this.g.oa());this.Eb=w()}function sk(a){var b=a.c.b(pc),c=a.c.b(oc),d={};a.g.oa().forEach(function(a){var e=b.get(df(a)).Va(),e=wf(c,e).map(function(a){return a.m});d[a.getName()]=e});return{name:a.g.name(),version:a.g.version(),tables:d}}m=rk.prototype;m.exec=function(){var a=sk(this),a=new Jd(new $b(-1,a),!0);return v([new G([a],[])])};m.I=l(0);m.ca=g("aa");m.W=function(){return la(this)};m.getPriority=l(0);function tk(a,b){this.c=a;this.g=a.b(tc);this.aa=B(this.g.oa());this.Eb=w();this.Ba=b;this.Oa=a.b(nc);this.V=a.b(oc);this.C=a.b(pc)}m=tk.prototype;
m.exec=function(){if(!(this.Oa instanceof $e||this.Oa instanceof gf||this.Oa instanceof sf))throw new D(300);var a;a:{a=this.g.oa();for(var b=0;b<a.length;++b)if(0<this.C.get(df(a[b])).Y().ia){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.g.name()!=this.Ba.name||this.g.version()!=this.Ba.version)throw new D(111);if(null==this.Ba.tables)throw new D(112);return uk(this)};m.I=l(1);m.ca=g("aa");m.W=function(){return la(this)};m.getPriority=l(0);
function uk(a){var b=new md(a.c,a.aa),b=a.Oa.Hb(a.I(),C(a.aa),b),c;for(c in a.Ba.tables){var d=a.g.table(c),e=a.Ba.tables[c].map(function(a){return d.mb(a)}),f=b.H(c,d.cb,0);a.V.Wb(c,e);var h=a.C.mc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.ob(b.getName());b.add(c,a.id())})});f.put(e)}return b.ka()};function vk(a,b){this.c=a;this.Oa=a.b(nc);this.Ia=a.b(rc);this.Kb=a.b(sc);this.aa=B(b);this.Ra=new md(this.c,this.aa);this.Eb=w();this.xc=w();this.ze=w()}m=vk.prototype;m.exec=function(){this.ze.resolve();return this.xc.ha};m.I=l(1);m.ca=g("aa");m.W=function(){return la(this)};m.getPriority=l(2);function wk(a){Be(a.Ia,a);return a.ze.ha}
function xk(a,b){b=b.Cc();return b.ie.fb().exec(a.Ra,b.context).then(function(a){return Bd(a[0])},function(a){this.Ra.Lb();var b=new jb(a.name);this.xc.reject(b);throw a;}.bind(a))}m.ka=function(){this.ja=this.Oa.Hb(this.I(),C(this.aa),this.Ra);this.ja.ka().then(function(){this.Nc();this.xc.resolve()}.bind(this),function(a){this.Ra.Lb();this.xc.reject(a)}.bind(this));return this.Eb.ha};m.Lb=function(){this.Ra.Lb();this.xc.resolve();return this.Eb.ha};
m.Nc=function(){var a=Ae(this.Kb,this.aa);0!=a.length&&(a=new xe(this.c,a),Be(this.Ia,a))};m.Y=function(){var a=null;null!=this.ja&&(a=this.ja.Y());return null===a?new A(!1,0,0,0,0):a};function V(a){this.c=a;this.Ia=a.b(rc);this.Mb=null;this.Ta=0;0==yk.size&&(yk.set(0,B([1,4])),yk.set(1,B([2])),yk.set(2,B([3,5,6])),yk.set(3,B([2,7])),yk.set(4,B([7])),yk.set(5,B([7])),yk.set(6,B([7])))}q("lf.proc.Transaction",V);var yk=y();function zk(a,b){var c=yk.get(a.Ta)||null;if(null===c||!c.has(b))throw new D(107,a.Ta,b);a.Ta=b}
V.prototype.exec=function(a){zk(this,4);var b=[];try{a.forEach(function(a){a.bb();b.push(a.Cc())},this)}catch(c){return zk(this,7),bb(c)}this.Mb=new Eh(this.c,b);return Be(this.Ia,this.Mb).then(function(a){zk(this,7);return a.map(function(a){return Bd(a)})}.bind(this),function(a){zk(this,7);throw a;}.bind(this))};V.prototype.exec=V.prototype.exec;V.prototype.Ef=function(a){zk(this,1);this.Mb=new vk(this.c,a);return wk(this.Mb).then(function(){zk(this,2)}.bind(this))};V.prototype.begin=V.prototype.Ef;
V.prototype.Df=function(a){zk(this,3);try{a.bb()}catch(b){return zk(this,7),bb(b)}return xk(this.Mb,a).then(function(a){zk(this,2);return a}.bind(this),function(a){zk(this,7);throw a;}.bind(this))};V.prototype.attach=V.prototype.Df;V.prototype.ka=function(){zk(this,5);return this.Mb.ka().then(function(){zk(this,7)}.bind(this))};V.prototype.commit=V.prototype.ka;V.prototype.Lb=function(){zk(this,6);return this.Mb.Lb().then(function(){zk(this,7)}.bind(this))};V.prototype.rollback=V.prototype.Lb;
V.prototype.Y=function(){if(7!=this.Ta)throw new D(105);return this.Mb.Y()};V.prototype.stats=V.prototype.Y;function W(a){this.c=a;this.g=a.b(tc);this.jd=!1}q("lf.proc.Database",W);W.prototype.Ea=function(a){this.c.sb(tc,this.g);return qk(this.c,a).then(function(){this.jd=!0;this.Ia=this.c.b(rc);return this}.bind(this))};W.prototype.init=W.prototype.Ea;W.prototype.Ab=g("g");W.prototype.getSchema=W.prototype.Ab;function Ak(a){if(!a.jd)throw new D(2);}W.prototype.select=function(a){Ak(this);return new U(this.c,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.Bb=function(){Ak(this);return new di(this.c)};W.prototype.insert=W.prototype.Bb;W.prototype.Wd=function(){Ak(this);return new di(this.c,!0)};W.prototype.insertOrReplace=W.prototype.Wd;W.prototype.update=function(a){Ak(this);return new ni(this.c,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){Ak(this);return new ci(this.c)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){Ak(this);this.c.b(sc).Cd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){Ak(this);this.c.b(sc).me(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Nf=function(){Ak(this);return new V(this.c)};W.prototype.createTransaction=W.prototype.Nf;W.prototype.close=function(){try{this.c.b(nc).close()}catch(a){}this.c.clear();this.jd=!1};W.prototype.close=W.prototype.close;
W.prototype.Xf=function(){Ak(this);var a=new rk(this.c);return Be(this.Ia,a).then(function(a){return Bd(a[0])[0]})};W.prototype["export"]=W.prototype.Xf;W.prototype.import=function(a){Ak(this);a=new tk(this.c,a);return Be(this.Ia,a).then(l(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.U=a;this.A=b;this.Xe=c;this.Ve=d;this.wf=e;this.Ka=f||null}q("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("A");m.j=function(){return Ld(this.U)+"."+this.A};m.toString=function(){return this.j()};m.H=g("U");m.I=g("wf");X.prototype.getType=X.prototype.I;X.prototype.Da=function(){null==this.ta&&(this.ta=[],this.H().Da().forEach(function(a){-1!=a.f.map(function(a){return a.da.getName()}).indexOf(this.A)&&this.ta.push(a)},this));return this.ta};
X.prototype.Ca=function(){if(!n(this.fa)){var a=this.Da().filter(function(a){return 1!=a.f.length?!1:a.f[0].da.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};X.prototype.ic=g("Ve");X.prototype.isNullable=X.prototype.ic;X.prototype.Ec=g("Xe");X.prototype.Qa=function(a){return Pg(this,a,"eq")};X.prototype.eq=X.prototype.Qa;X.prototype.df=function(a){return Pg(this,a,"neq")};X.prototype.neq=X.prototype.df;X.prototype.rg=function(a){return Pg(this,a,"lt")};
X.prototype.lt=X.prototype.rg;X.prototype.sg=function(a){return Pg(this,a,"lte")};X.prototype.lte=X.prototype.sg;X.prototype.ag=function(a){return Pg(this,a,"gt")};X.prototype.gt=X.prototype.ag;X.prototype.bg=function(a){return Pg(this,a,"gte")};X.prototype.gte=X.prototype.bg;X.prototype.match=function(a){return Pg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Ff=function(a,b){return Pg(this,[a,b],"between")};X.prototype.between=X.prototype.Ff;
X.prototype.cg=function(a){return Pg(this,a,"in")};X.prototype["in"]=X.prototype.cg;X.prototype.mg=function(){return this.Qa(null)};X.prototype.isNull=X.prototype.mg;X.prototype.lg=function(){return this.df(null)};X.prototype.isNotNull=X.prototype.lg;X.prototype.sc=function(a){return new X(this.U,this.A,this.Xe,this.Ve,this.wf,a)};X.prototype.as=X.prototype.sc;function Bk(a){this.g=a;this.Id=new Vc;this.ne=new Vc;this.ff=new Vc;this.Ie=y();this.h=new Vc;this.Ee=new Vc;this.lf=new Vc;this.He=new Vc;Ck(this)}function Ck(a){a.g.oa().forEach(function(a){var b=a.getName();a.zb().Ud.forEach(function(c){this.ff.set(b,this.g.table(c.Xa));this.h.set(c.Xa,a);0==c.action?(this.ne.set(c.Xa,c),this.lf.set(c.Xa,a)):(this.Id.set(c.Xa,c),this.Ee.set(c.Xa,a));this.Ie.set(a.getName()+"."+c.wb,c.Xa);this.He.set(c.Xa+"."+c.Kc,a.getName())},this)},a)}
function cd(a,b,c){if(null!=c)return 1==c?a.Id.get(b):a.ne.get(b);c=a.Id.get(b);a=a.ne.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Kh(a,b){a=b.get(a);return null===a?[]:a}function Mh(a,b){var c=B();b.forEach(function(a){(a=this.Ie.get(a))&&c.add(a)},a);return C(c).map(function(a){return this.g.table(a)},a)}function Ih(a,b,c){return null!=c?0==c?Kh(b,a.lf):Kh(b,a.Ee):Kh(b,a.h)}
function Nh(a,b){var c=B();b.forEach(function(a){(a=this.He.get(a))&&a.forEach(function(a){c.add(a)})},a);return C(c).map(function(a){return this.g.table(a)},a)};function Dk(a,b,c){this.td=a;this.xg=b;this.Ud=c}q("lf.schema.Constraint",Dk);Dk.prototype.$f=g("td");Dk.prototype.getPrimaryKey=Dk.prototype.$f;Dk.prototype.Zf=g("Ud");Dk.prototype.getForeignKeys=Dk.prototype.Zf;function Ek(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.Ge=b;this.wb=a.local;this.Xa=d[0];this.Kc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){Fk(a);this.Qd=Xd();this.A=a;this.K=y();this.zd=B();this.oc=B();this.od=B();this.Fa=null;this.ta=y();this.sd=!1;this.yb=[]}q("lf.schema.TableBuilder",Y);function Gk(a){this.name=a.name;this.order=a.order;this.autoIncrement=a.autoIncrement}var Hk=B([0,6]);function Fk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function Ik(a,b){if(b==a.A)throw new D(546,b);if(a.K.has(b)||a.ta.has(b)||a.oc.has(b))throw new D(503,a.A+"."+b);}
function Jk(a,b){var c=!1;b.forEach(function(a){var b=this.K.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function Kk(a){if(null!==a.Fa){var b=a.ta.get(a.Fa).map(function(a){return a.name}),c=0;if(a.yb.some(function(a,e){c=e;return-1!=b.indexOf(a.wb)},a))throw new D(543,a.yb[c].name);}}
function Lk(a){if(null!==a.Fa){var b=function(a){return a.name},c=JSON.stringify(a.ta.get(a.Fa).map(b));a.ta.forEach(function(a,e){if(e!=this.Fa&&(a=a.map(b),JSON.stringify(a)==c))throw new D(544,this.A+"."+e);},a)}}function Mk(a){null===a.Fa||a.ta.get(a.Fa).forEach(function(a){if(this.od.has(a.name))throw new D(545,this.A+"."+a.name);},a)}Y.prototype.yf=function(a,b){Fk(a);Ik(this,a);this.K.set(a,b);Hk.has(b)&&this.Be([a]);return this};Y.prototype.addColumn=Y.prototype.yf;
Y.prototype.Af=function(a,b){var c=this.A;this.Fa="pk"+(c[0].toUpperCase()+c.substring(1));Fk(this.Fa);Ik(this,this.Fa);a=Nk(this,a,!0,void 0,b);Jk(this,a);1==a.length&&this.zd.add(a[0].name);this.oc.add(this.Fa);this.ta.set(this.Fa,a);return this};Y.prototype.addPrimaryKey=Y.prototype.Af;
Y.prototype.zf=function(a,b){Fk(a);Ik(this,a);b=new Ek(b,this.A,a);n(b.action)||(b.action=0);n(b.timing)||(b.timing=0);if(1==b.action&&1==b.timing)throw new D(506);if(!this.K.has(b.wb))throw new D(540,a);this.yb.push(b);this.Ae(a,[b.wb],this.zd.has(b.wb));return this};Y.prototype.addForeignKey=Y.prototype.zf;Y.prototype.Bf=function(a,b){Fk(a);Ik(this,a);b=Nk(this,b,!0);1==b.length&&(this.zd.add(b[0].name),Ok(this,b[0].name));this.ta.set(a,b);this.oc.add(a);return this};Y.prototype.addUnique=Y.prototype.Bf;
function Ok(a,b){a.yb.forEach(function(a){a.wb==b&&this.oc.add(a.name.split(".")[1])},a)}Y.prototype.Be=function(a){Nk(this,a,!1).forEach(function(a){this.od.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.Be;Y.prototype.Ae=function(a,b,c,d){Fk(a);Ik(this,a);b=Nk(this,b,!0,d);c&&this.oc.add(a);this.ta.set(a,b);return this};Y.prototype.addIndex=Y.prototype.Ae;Y.prototype.Db=ba("sd");Y.prototype.persistentIndex=Y.prototype.Db;
Y.prototype.Ab=function(){Kk(this);Lk(this);Mk(this);return new (Pk(this))};Y.prototype.getSchema=Y.prototype.Ab;function Nk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new Gk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Gk(a)});f.forEach(function(a){if(!this.K.has(a.name))throw new D(508,this.A,a.name);if(c){var b=this.K.get(a.name);if(0==b||6==b)throw new D(509,this.A,a.name);}},a);return f}
function Pk(a){function b(){function b(b){return a.ta.get(b).map(function(a){return{da:this[a.name],order:a.order,autoIncrement:a.autoIncrement}},this)}var d=Zb(a.K).map(function(b){this[b]=new X(this,b,a.zd.has(b),a.od.has(b),a.K.get(b));return this[b]},this),e=Zb(a.ta).map(function(c){return new Rg(a.A,c,a.oc.has(c),b.call(this,c))},this);Q.call(this,a.A,d,e,a.sd);var f=null===a.Fa?null:new Rg(a.A,a.Fa,!0,b.call(this,a.Fa)),h=d.filter(function(b){return!a.od.has(b.getName())});this.Kf=new Dk(f,
h,a.yb);this.pf=Qk(a,d,e)}r(b,Q);b.prototype.mb=function(a){return new this.pf(ac++,a)};b.prototype.createRow=b.prototype.mb;b.prototype.cb=function(a){var b={};this.eb().forEach(function(c){var d=c.getName();c=c.I();var e=a.value[d];if(0==c)if(c=e,null!=c&&""!=c){0!=c.length%2&&(c="0"+c);for(var e=new ArrayBuffer(c.length/2),k=new Uint8Array(e),p=0,K=0;p<c.length;p+=2)k[K++]=parseInt(c.substr(p,2),16);c=e}else c=null;else c=2==c?null!=e?new Date(e):null:e;b[d]=c},this);return new this.pf(a.id,b)};
b.prototype.deserializeRow=b.prototype.cb;b.prototype.zb=g("Kf");b.prototype.getConstraint=b.prototype.zb;return b}
function Qk(a,b,c){function d(a,d){this.K=b;this.ta=c;$b.call(this,a,d)}r(d,$b);d.prototype.Ke=function(){var a={};this.K.forEach(function(b){a[b.getName()]=b.ic()?null:Tc[b.I()]});return a};d.prototype.vf=function(){var a={};this.K.forEach(function(b){var c=b.getName();b=b.I();var d=this.m[c];a[c]=0==b?null!=d?dc(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.K.get(a.getName()),c=this.Qd.Ye.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.da)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.j();a=1==a.f.length?e(a.f[0].da):f(a.f);h[b]=a});d.prototype.ob=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.m):null};return d};function Rk(a,b){this.g=new Z(a,b);this.ub=y();this.yc=!1;this.i=null;this.$c=!1}q("lf.schema.Builder",Rk);function Sk(a,b){b.yb.forEach(function(a){var c=a.Xa;if(!this.ub.has(c))throw new D(536,a.name);var c=this.ub.get(c).Ab(),e=a.Kc;if(!c.hasOwnProperty(e))throw new D(537,a.name);if(b.Ab()[a.wb].I()!=c[e].I())throw new D(538,a.name);if(!c[e].Ec())throw new D(539,a.name);},a)}
Rk.prototype.Jf=function(a){a.yb.forEach(function(a){this.ub.get(a.Xa).yb.forEach(function(b){if(b.wb==a.Kc)throw new D(534,a.name);},this)},this)};function Tk(a){a.yc||(a.ub.forEach(function(a){Sk(this,a);a=a.Ab();this.g.M.set(a.getName(),a)},a),z(a.ub).forEach(a.Jf,a),Uk(a),a.ub.clear(),a.yc=!0)}function Vk(a,b,c){b.ye||(b.ye=!0,b.ee=!0,b.Le.forEach(function(a){a=c.get(a);if(!a.ye)Vk(this,a,c);else if(a.ee&&b!=a)throw new D(533);},a));b.ee=!1}
function Uk(a){var b=y();a.g.M.forEach(function(a,d){b.set(d,new Wk(d))},a);a.ub.forEach(function(a,d){a.yb.forEach(function(a){b.get(a.Xa).Le.add(d)})});z(b).forEach(function(a){Vk(this,a,b)},a)}function Wk(a){this.ee=this.ye=!1;this.Le=B();this.nc=a}Rk.prototype.Ab=function(){this.yc||Tk(this);return this.g};Rk.prototype.getSchema=Rk.prototype.Ab;Rk.prototype.Pe=function(){var a=new mc("ns_"+this.g.name()),b=bk(),c;b.nd(a)?c=b.b(a):(c=new Zj,b.sb(a,c));return c};Rk.prototype.getGlobal=Rk.prototype.Pe;
Rk.prototype.connect=function(a){if(this.$c||null!==this.i&&this.i.jd)throw new D(113);this.$c=!0;if(null===this.i){var b=this.Pe();b.nd(tc)||b.sb(tc,this.Ab());this.i=new W(b)}return this.i.Ea(a).then(function(a){this.$c=!1;return a}.bind(this),function(a){this.$c=!1;throw a;}.bind(this))};Rk.prototype.connect=Rk.prototype.connect;Rk.prototype.Mf=function(a){if(this.ub.has(a))throw new D(503,a);if(this.yc)throw new D(535);this.ub.set(a,new Y(a));return this.ub.get(a)};Rk.prototype.createTable=Rk.prototype.Mf;
Rk.prototype.se=function(a){if(this.yc)throw new D(535);this.g.se(a);return this};Rk.prototype.setPragma=Rk.prototype.se;function Z(a,b){this.A=a;this.Ua=b;this.M=y();this.je={Sf:!1}}q("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("A");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Ua");Z.prototype.version=Z.prototype.version;Z.prototype.oa=function(){return z(this.M)};Z.prototype.tables=Z.prototype.oa;Z.prototype.table=function(a){if(!this.M.has(a))throw new D(101,a);return this.M.get(a)};
Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Ue||(this.Ue=new Bk(this));return this.Ue};Z.prototype.Fg=g("je");Z.prototype.pragma=Z.prototype.Fg;Z.prototype.se=ba("je");q("lf.schema.create",function(a,b){return new Rk(a,b)});u.prototype.catch=u.prototype.ve;u.prototype["catch"]=u.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))();
//# sourceMappingURL=lovefield.min.js.map
